var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequire7951;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,s.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire7951=s),s("014TN"),s("iO6Mx"),s("hiPTG"),s("70IEE"),s("b11DO");var a=s("014TN"),i=s("hiPTG");console.log(localStorage.page);const o=document.querySelector(".shopping-list-list"),l=document.querySelector(".shopping-dummy-message"),c=document.querySelector(".shopping-paginator-list"),r=document.querySelector(".shopping-refresh-btn"),d=document.querySelector('button[data-page="start"]'),u=document.querySelector('button[data-page="last"]'),p=document.querySelector('button[data-page="first"]'),g=document.querySelector('button[data-page="second"]'),h=document.querySelector(".btn-hidden"),v=document.querySelector('button[data-page="more"]'),L=document.querySelector('button[data-page="next"]'),m=document.querySelector('button[data-page="end"]'),f=window.matchMedia("(min-width: 768px)"),y=document.querySelector(".support"),b=window.matchMedia("(max-width: 1439px)");function k(e){e.matches?y.classList.add("visually-hidden"):y.classList.remove("visually-hidden")}y.style.position="static",b.addListener(k),k(b);let x="",w=[],S=0,C=3,I=1,N=1;function E(e){return w=e,console.log(w),w}function q(e){return S=e.length,console.log(S),S}function T(){return C=f.matches?4:3}function B(){return console.log(S),N=Math.ceil(S/C),N}function M(){I<=0&&(I=1,console.log(I)),Number.parseInt(localStorage.getItem("page"))>0&&(I=localStorage.getItem("page"),console.log(I)),I>N&&(I=N),console.log(I)}function z(){S>0?(l.classList.add("visually-hidden"),o.classList.remove("visually-hidden"),o.addEventListener("click",U,{once:"true"})):(o.classList.add("visually-hidden"),c.classList.add("visually-hidden"),l.classList.remove("visually-hidden"),o.removeEventListener("click",U,{once:"true"}),c.removeEventListener("click",G))}function D(e){T(),e.matches?h.classList.remove("visually-hidden"):4===o.children.length?o.lastElementChild.classList.remove("visually-hidden"):(h.classList.add("visually-hidden"),4===o.children.length&&o.lastElementChild.classList.add("visually-hidden")),V(),O(I)}function $(e){return I+=e,localStorage.page=I,I}function _(e,t){localStorage.page=e;const n=t.splice((e-1)*C,C);return console.log(n),n}function A(e){p.textContent=Number.parseInt(p.textContent)+e,g.textContent=Number.parseInt(g.textContent)+e,h.textContent=Number.parseInt(h.textContent)+e}function O(e){p.textContent=e,g.textContent=e+1,h.textContent=e+2}async function H(e){T(),B(),o.innerHTML="",z();const t=await(0,i.reedBookID)(x);await E(t),_(e,t).forEach((e=>{P(e)})),V()}async function H(e){try{const t=await(0,i.reedBookID)(x);await E(t),q(t),T(),B(),M(),o.innerHTML="",z(),_(e,t).forEach((e=>{P(e)})),V()}catch(e){console.log(e)}}async function P(e){try{!function(e,t){let{title:n="Title unknown",author:s="Author unknown",book_image:a="./image/shopping/dummy-book-tr.png",list_name:i="No category",description:l,buy_links:c}=e;const r=c;let d="https://www.amazon.com",u="https://books.apple.com",p="https://bookshop.org";d=r[0].url,u=r[1].url,p=r[4].url,0===l.trim().length&&(l="Description is not available for that book");let g="";g=`<li class="shopping-list-item"><div class="shopping-list-item-card">\n          <img\n            class="shopping-card-img"\n            src="${a}"\n            alt="book cover"\n            width="100"\n            height="142" loading="lazy"\n          />\n          <div class="shopping-list-card-info">\n            <h2 class="shopping-card-title">${n}</h2>\n            <p class="shopping-card-category">${i}</p>\n            <p class="shopping-card-descr">${l}</p><p class="visually-hidden">\n              Description is not available for that book\n            </p>\n            <div class="shopping-card-bottom-container">\n              <p class="shopping-card-author">${s}</p>\n              <ul class="shopping-card-shop-list">\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${d}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Amazon link"\n                    ><img\n                      width="32"\n                      class="shopping-card-link-icon shopping-card-link-amazon"\n                      src="./shop-amazon-62x19px.a7ec3af8.png"\n                      alt="Amazon" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${u}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Apple Books link"\n                  >\n                    <img\n                      width="16"\n                      height="16"\n                      class="shopping-card-link-icon"\n                      src="./shop-read-33x32px.a9f158e0.png"\n                      alt="Apple Books" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${p}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="BookShop link"\n                  >\n                    <img\n                      width="16"\n                      height="16"\n                      class="shopping-card-link-icon shopping-card-link-shopbook"\n                      src="./shop-book-shop-38x36px.eb5fbc1e.png"\n                      alt="BookShop" loading="lazy"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class="shopping-btn-dump" type="button" data-book="${t}">\n                <svg class="shopping-btn-dump-icon" width="16" height="16">\n                  <use href="./icons-all.435abbb0.svg#dump"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>`,o.insertAdjacentHTML("beforeend",g)}(await(0,a.fetchBookById)(e),e)}catch(e){console.log(e),z(),c.classList.add("visually-hidden"),l.firstElementChild.textContent="Server is not available right now. Please, try later",l.classList.remove("visually-hidden")}}function U(e){"use"!==e.target.nodeName&&"svg"!==e.target.nodeName&&"BUTTON"!==e.target.nodeName||function(e){const t=e.target.dataset.book;if((0,i.dellBookID)(t,x),T(),S-1==0)return z();if(I>Math.ceil((S-1)/C))return J();H(I)}(e)}function G(e){if(T(),!(S<=C||Number.parseInt(e.target.textContent)>N||Number.parseInt(e.target.textContent)===I))return"start"===e.target.dataset.page&&I>1?F():"last"===e.target.dataset.page?J():"first"===e.target.dataset.page?R(p):"second"===e.target.dataset.page&&N>=2?R(g):"third"===e.target.dataset.page&&N>=3?R(h):"more"===e.target.dataset.page?Q():"next"===e.target.dataset.page?K():"end"===e.target.dataset.page?function(){if(2===N)return K();I!=N&&(j(),4===C?(h.classList.add("current-page"),O(N-2)):(g.classList.add("current-page"),O(N-1)),$(N-I),H(I))}():void 0}function R(e){$(Number.parseInt(e.textContent)-I),j(),e.classList.add("current-page"),H(I)}function j(){p.classList.remove("current-page"),g.classList.remove("current-page"),h.classList.remove("current-page")}function F(){j(),O(1),$(1-I),p.classList.add("current-page"),H(1)}function J(){if(!(I<=1))return 2===I?F():(3===C?function(){p.classList.contains("current-page")?(j(),g.classList.add("current-page"),A(-2)):g.classList.contains("current-page")?(j(),p.classList.add("current-page")):A(-1);3===I&&(p.classList.contains("current-page")?(j(),g.classList.add("current-page"),A(-2)):g.classList.contains("current-page")&&(j(),p.classList.add("current-page"),A(-1)))}():function(){p.classList.contains("current-page")&&3!==I?(j(),h.classList.add("current-page"),A(-3)):g.classList.contains("current-page")&&3!==I?(j(),p.classList.add("current-page")):h.classList.contains("current-page")&&3!==I&&(j(),g.classList.add("current-page"));3===I&&(p.classList.contains("current-page")?(j(),g.classList.add("current-page"),A(-2)):g.classList.contains("current-page")?(j(),p.classList.add("current-page")):(j(),g.classList.add("current-page")))}(),$(-1),H(I))}function K(){I>=N||(3===C?p.classList.contains("current-page")?(j(),g.classList.add("current-page")):g.classList.contains("current-page")?(j(),p.classList.add("current-page"),A(2)):A(1):function(){if(p.classList.contains("current-page"))j(),g.classList.add("current-page");else if(g.classList.contains("current-page"))j(),h.classList.add("current-page");else{if(h.classList.contains("current-page"))return Q();A(1)}}(),console.log("next"),$(1),H(I))}function Q(){if(Number.parseInt(p.textContent)+C-1<=N)return console.log("more"),j(),p.classList.add("current-page"),A(4===C?3:2),$(p.textContent-I),H(I)}function V(){if(N<=1)return c.classList.add("visually-hidden"),void c.removeEventListener("click",G);I>1?(c.classList.remove("visually-hidden"),c.addEventListener("click",G)):I>3?d.classList.remove("visually-hidden"):(I=p.classList.contains("current-page"))&&(console.log("p = 3 and 1t = c"),d.classList.remove("visually-hidden")),3===C&&(I>2&&d.classList.remove("visually-hidden"),I>2&&p.classList.contains("current-page")&&u.classList.remove("visually-hidden"),N>3&&v.classList.remove("visually-hidden"),N-I==1&&g.classList.contains("current-page")&&L.classList.remove("visually-hidden"),N-I==1&&p.classList.contains("current-page")&&L.classList.add("visually-hidden"),N>4&&m.classList.remove("visually-hidden"),N-I<2&&m.classList.add("visually-hidden")),4===C&&(I>3?(d.classList.remove("visually-hidden"),u.classList.remove("visually-hidden")):3===I&&p.classList.contains("current-page")?(console.log("1"),d.classList.remove("visually-hidden")):2===I&&p.classList.contains("current-page")?u.classList.remove("visually-hidden"):I>1?p.classList.remove("visually-hidden"):N>I&&g.classList.contains("current-page")?g.classList.remove("visually-hidden"):N===I&&p.classList.contains("current-page")?(console.log("10"),g.classList.add("visually-hidden")):N>I&&h.classList.contains("current-page")?h.classList.remove("visually-hidden"):N===I&&g.classList.contains("current-page")?h.classList.add("visually-hidden"):N>4?v.classList.remove("visually-hidden"):N-I==1&&h.classList.contains("current-page")?(console.log("20"),v.classList.add("visually-hidden"),L.classList.remove("visually-hidden")):N===I?(L.classList.add("visually-hidden"),m.classList.remove("visually-hidden")):N>5?(console.log("30"),m.classList.remove("visually-hidden")):N-I<3&&p.classList.contains("current-page")&&m.classList.add("visually-hidden"))}x=localStorage.getItem("user-id"),async function(){try{O(I);const e=await(0,i.reedBookID)(x);E(e),q(e),T(),B(),M(),o.innerHTML="",z(),_(I,e).forEach((e=>{P(e)})),V()}catch(e){console.log(e)}}(),f.addListener(D),D(f),r.addEventListener("click",(function(){r.style.color="var(--main-text-color)",H(I)}));
//# sourceMappingURL=shopping.a221901c.js.map
