var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},a={},t=s.parcelRequire7951;null==t&&((t=function(s){if(s in e)return e[s].exports;if(s in a){var t=a[s];delete a[s];var n={id:s,exports:{}};return e[s]=n,t.call(n.exports,n,n.exports),n.exports}var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(s,e){a[s]=e},s.parcelRequire7951=t),t("014TN"),t("iO6Mx"),t("hiPTG"),t("70IEE"),t("b11DO");var n=t("014TN"),l=t("9EgcF");console.log(localStorage.page);const i=document.querySelector(".shopping-list-list"),d=document.querySelector(".shopping-dummy-message"),o=document.querySelector(".shopping-paginator-list"),c=document.querySelector(".shopping-refresh-btn"),r=document.querySelector('button[data-page="start"]'),u=document.querySelector('button[data-page="last"]'),g=document.querySelector('button[data-page="first"]'),h=document.querySelector('button[data-page="second"]'),p=document.querySelector(".btn-hidden"),v=document.querySelector('button[data-page="more"]'),L=document.querySelector('button[data-page="next"]'),m=document.querySelector('button[data-page="end"]'),y=window.matchMedia("(min-width: 768px)"),f=document.querySelector(".support"),b=window.matchMedia("(max-width: 1439px)");function k(s){s.matches?f.classList.add("visually-hidden"):f.classList.remove("visually-hidden")}f.style.position="static",b.addListener(k),k(b);let S=[],x=3,N=1,w=1;function I(){return JSON.parse(localStorage.getItem("id"))?S=JSON.parse(localStorage.getItem("id")):(S=[],localStorage.setItem("id",JSON.stringify(S)))}function C(){x=y.matches?4:3,w=Math.ceil(JSON.parse(localStorage.getItem("id")).length/x)}function O(){JSON.parse(localStorage.getItem("id")).length>0?(d.classList.add("visually-hidden"),i.classList.remove("visually-hidden"),i.addEventListener("click",P,{once:"true"})):(i.classList.add("visually-hidden"),o.classList.add("visually-hidden"),d.classList.remove("visually-hidden"),i.removeEventListener("click",P,{once:"true"}),o.removeEventListener("click",_))}I(),C();const q=setTimeout((()=>{j()}),1e4);function E(){Number.parseInt(localStorage.getItem("page"))>0?(console.log("more then null"),N=JSON.parse(localStorage.getItem("page")),console.log(`now is page ${N}`),N>w&&(console.log("more then need"),N=w)):(console.log("page else"),N=1)}function T(s){C(),s.matches?p.classList.remove("visually-hidden"):4===i.children.length?i.lastElementChild.classList.remove("visually-hidden"):4===i.children.length&&i.lastElementChild.classList.add("visually-hidden"),F(),J(N)}function $(s){return N+=s,localStorage.page=N,N}function z(s){g.textContent=Number.parseInt(g.textContent)+s,h.textContent=Number.parseInt(h.textContent)+s,p.textContent=Number.parseInt(p.textContent)+s}function J(s){g.textContent=s,h.textContent=s+1,p.textContent=s+2}function _(s){if(C(),!(I().length<=x||Number.parseInt(s.target.textContent)>w||Number.parseInt(s.target.textContent)===N))return"start"===s.target.dataset.page&&N>1?A():"last"===s.target.dataset.page?D():"first"===s.target.dataset.page?B(g):"second"===s.target.dataset.page&&w>=2?B(h):"third"===s.target.dataset.page&&w>=3?B(p):"more"===s.target.dataset.page?U(x):"next"===s.target.dataset.page?R():"end"===s.target.dataset.page?function(){if(2===w)return R();N!=w&&(M(),4===x?(p.classList.add("current-page"),J(w-2)):(h.classList.add("current-page"),J(w-1)),$(w-N),H(N,x))}():void 0}function B(s){$(Number.parseInt(s.textContent)-N),M(),s.classList.add("current-page"),H(N,x)}function M(){g.classList.remove("current-page"),h.classList.remove("current-page"),p.classList.remove("current-page")}function A(){M(),J(1),$(1-N),g.classList.add("current-page"),H(1,x)}function D(){if(!(N<=1))return 2===N?A():(3===x?function(){g.classList.contains("current-page")?(M(),h.classList.add("current-page"),z(-2)):h.classList.contains("current-page")?(M(),g.classList.add("current-page")):z(-1);3===N&&(g.classList.contains("current-page")?(M(),h.classList.add("current-page"),z(-2)):h.classList.contains("current-page")&&(M(),g.classList.add("current-page"),z(-1)))}():function(){g.classList.contains("current-page")&&3!==N?(M(),p.classList.add("current-page"),z(-3)):h.classList.contains("current-page")&&3!==N?(M(),g.classList.add("current-page")):p.classList.contains("current-page")&&3!==N&&(M(),h.classList.add("current-page"));3===N&&(g.classList.contains("current-page")?(M(),h.classList.add("current-page"),z(-2)):h.classList.contains("current-page")?(M(),g.classList.add("current-page")):(M(),h.classList.add("current-page")))}(),$(-1),H(N,x))}function R(){N>=w||(3===x?g.classList.contains("current-page")?(M(),h.classList.add("current-page")):h.classList.contains("current-page")?(M(),g.classList.add("current-page"),z(2)):z(1):function(){if(g.classList.contains("current-page"))M(),h.classList.add("current-page");else if(h.classList.contains("current-page"))M(),p.classList.add("current-page");else{if(p.classList.contains("current-page"))return U(x);z(1)}}(),console.log("next"),$(1),H(N,x))}function U(s){if(Number.parseInt(g.textContent)+s-1<=w)return console.log("more"),M(),g.classList.add("current-page"),z(4===s?3:2),$(g.textContent-N),H(N,s)}function F(){if(w<=1)return o.classList.add("visually-hidden"),void o.removeEventListener("click",_);const s=w-N;w>4&&(console.log("more than 4"),r.classList.remove("visually-hidden"),h.classList.remove("visually-hidden"),u.classList.remove("visually-hidden"),v.classList.remove("visually-hidden"),L.classList.remove("visually-hidden"),m.classList.remove("visually-hidden")),3===x&&(p.classList.add("visually-hidden"),3===w?(console.log("its 3, paginator = 3"),r.classList.add("visually-hidden"),u.classList.add("visually-hidden"),v.classList.add("visually-hidden"),L.classList.remove("visually-hidden"),m.classList.add("visually-hidden")):4===w&&(console.log("its 4, paginator = 3"),r.classList.remove("visually-hidden"),u.classList.remove("visually-hidden"),v.classList.remove("visually-hidden"),L.classList.add("visually-hidden"),m.classList.remove("visually-hidden")),s<1&&g.classList.contains("current-page")?(console.log("less than 1-3-1c "),h.classList.add("visually-hidden"),L.classList.add("visually-hidden"),m.classList.add("visually-hidden"),v.classList.add("visually-hidden")):s<1?(console.log("less than 1-3 less1"),h.classList.remove("visually-hidden"),L.classList.add("visually-hidden"),m.classList.add("visually-hidden"),v.classList.add("visually-hidden")):s<=1?(console.log("less than 1-3 =1"),h.classList.remove("visually-hidden"),L.classList.remove("visually-hidden"),m.classList.add("visually-hidden"),v.classList.add("visually-hidden")):s<=1&&g.classList.contains("current-page")?(console.log("less than 1-3-1"),h.classList.remove("visually-hidden"),L.classList.remove("visually-hidden"),m.classList.add("visually-hidden"),v.classList.add("visually-hidden")):s>1&&(console.log("more than 1-difr"),h.classList.remove("visually-hidden"))),o.classList.remove("visually-hidden"),o.addEventListener("click",_),4===x&&(3===w?(console.log("its 3, paginator = 4"),r.classList.add("visually-hidden"),u.classList.add("visually-hidden"),p.classList.remove("visually-hidden"),v.classList.add("visually-hidden"),L.classList.add("visually-hidden"),m.classList.add("visually-hidden")):4===w&&(console.log("its 4, paginator = 4"),r.classList.remove("visually-hidden"),u.classList.remove("visually-hidden"),p.classList.remove("visually-hidden"),v.classList.remove("visually-hidden"),L.classList.remove("visually-hidden"),m.classList.add("visually-hidden"))),2===w&&(r.classList.add("visually-hidden"),u.classList.add("visually-hidden"),p.classList.add("visually-hidden"),v.classList.add("visually-hidden"),L.classList.add("visually-hidden"),m.classList.add("visually-hidden")),s<1&&g.classList.contains("current-page")?(console.log("less than 1-3-1c "),h.classList.add("visually-hidden"),p.classList.add("visually-hidden"),L.classList.add("visually-hidden"),m.classList.add("visually-hidden"),v.classList.add("visually-hidden")):s<1&&h.classList.contains("current-page")?(console.log("less than 1-3 less1"),h.classList.remove("visually-hidden"),p.classList.add("visually-hidden"),L.classList.add("visually-hidden"),m.classList.add("visually-hidden"),v.classList.add("visually-hidden")):s<=1?(console.log("less than 1-3 =1"),h.classList.remove("visually-hidden"),L.classList.remove("visually-hidden"),m.classList.add("visually-hidden"),v.classList.add("visually-hidden")):s<=1&&g.classList.contains("current-page")?(console.log("less than 1-3-1"),h.classList.remove("visually-hidden"),L.classList.remove("visually-hidden"),m.classList.add("visually-hidden"),v.classList.add("visually-hidden")):s>1&&(console.log("more than 1-difr"),h.classList.remove("visually-hidden")),1===N&&(r.classList.add("visually-hidden"),u.classList.add("visually-hidden"))}function H(s,e){var a,t;localStorage.page=s,i.innerHTML="",O(),C(),(a=s,t=e,I(),localStorage.page=a,S.splice((a-1)*t,t)).forEach((s=>{!async function(s){try{!function(s,e){let{title:a="Title unknown",author:t="Author unknown",book_image:n="./image/shopping/dummy-book-tr.png",list_name:l="No category",description:d,buy_links:o}=s;const c=o;let r="https://www.amazon.com",u="https://books.apple.com",g="https://bookshop.org";r=c[0].url,u=c[1].url,g=c[4].url,0===d.trim().length&&(d="Description is not available for that book");let h="";h=`<li class="shopping-list-item"><div class="shopping-list-item-card">\n          <img\n            class="shopping-card-img"\n            src="${n}"\n            alt="book cover"\n            width="100"\n            height="142" loading="lazy"\n          />\n          <div class="shopping-list-card-info">\n            <h2 class="shopping-card-title">${a}</h2>\n            <p class="shopping-card-category">${l}</p>\n            <p class="shopping-card-descr">${d}</p><p class="visually-hidden">\n              Description is not available for that book\n            </p>\n            <div class="shopping-card-bottom-container">\n              <p class="shopping-card-author">${t}</p>\n              <ul class="shopping-card-shop-list">\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${r}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Amazon link"\n                    ><img\n                      width="32"\n                      class="shopping-card-link-icon shopping-card-link-amazon"\n                      src="./shop-amazon-62x19px.a7ec3af8.png"\n                      alt="Amazon" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${u}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Apple Books link"\n                  >\n                    <img\n                      width="16"\n                      height="16"\n                      class="shopping-card-link-icon"\n                      src="./shop-read-33x32px.a9f158e0.png"\n                      alt="Apple Books" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${g}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="BookShop link"\n                  >\n                    <img\n                      width="16"\n                      height="16"\n                      class="shopping-card-link-icon shopping-card-link-shopbook"\n                      src="./shop-book-shop-38x36px.eb5fbc1e.png"\n                      alt="BookShop" loading="lazy"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class="shopping-btn-dump" type="button" data-book="${e}">\n                <svg class="shopping-btn-dump-icon" width="16" height="16">\n                  <use href="./icons-all.435abbb0.svg#dump"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>`,i.insertAdjacentHTML("beforeend",h)}(await(0,n.fetchBookById)(s),s)}catch(s){console.log(s),O(),o.classList.add("visually-hidden"),d.firstElementChild.textContent="Server is not available right now. Please, try later",d.classList.remove("visually-hidden")}}(s)})),clearInterval(q),q=setTimeout((()=>{j()}),1e4),F(),S=JSON.parse(localStorage.getItem("id"))}function P(s){"use"!==s.target.nodeName&&"svg"!==s.target.nodeName&&"BUTTON"!==s.target.nodeName||function(s){const e=s.target.dataset.book,a=S.indexOf(e);if(I(),S.splice(a,1),localStorage.setItem("id",JSON.stringify(S)),C(),0===S.length)return O();if(N>w)return D();H(N,x)}(s)}function j(){S.length<JSON.parse(localStorage.getItem("id")).length&&(c.style.color="var(--background-color-main)",l.Notify.success("You have more new books in the busket. Click Refresh button to check"))}E(),console.log(N),console.log(localStorage.page),C(),H(N,x),J(N),console.log(N),console.log(localStorage.page),y.addListener(T),T(y),c.addEventListener("click",(function(){c.style.color="var(--main-text-color)",E(),H(N,x)}));
//# sourceMappingURL=shopping.1a321ae5.js.map
