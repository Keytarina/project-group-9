function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},s=t.parcelRequire7951;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire7951=s),s.register("27Lyk",(function(t,n){var o,s;e(t.exports,"register",(()=>o),(e=>o=e)),e(t.exports,"resolve",(()=>s),(e=>s=e));var i={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},s=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s("27Lyk").register(JSON.parse('{"ioUUD":"index.e5398629.js","jI9re":"shop-amazon-62x19px.a7ec3af8.png","iUdC1":"shop-read-33x32px.a9f158e0.png","jdnIm":"shop-book-shop-38x36px.eb5fbc1e.png","itVWs":"shopping.20ac0189.js"}')),s("014TN"),s("iO6Mx"),s("70IEE");var i=s("014TN");const a=e=>'<h1 class="best-sellers-header">Best Sellers <span class="best-sellers-accent">Books</span></h1>'.concat([...e].map((e=>{const{list_name:t,books:n}=e;return`<div class="book-list-wrapper"><h2 class="best-sellers-title">${t}</h2>\n     <ul class="best-sellers-list">${n.map((e=>{const{_id:t,author:n,book_image:o,title:s}=e;return`<li class="best-sellers-list-item">\n              <div class="best-sellers-thumb"><img class="best-sellers-image" src=${o} alt=${s} data-id-img=${t}/><div class="book-thumb-overlay"><p class="book-overlay-text">quick view</p></div></div>\n              <div class="book-description-thumb"><h3 class="book-title">${s.length>18?s.slice(0,18)+"...":s}</h3>\n              <p class="book-description">${n}</p></div>\n          </li>`})).join("")}</ul><button class="see-more-btn" type="button">See More</button></div>`})).join("")),l=e=>{let t;const n=[...e].map((e=>{const{_id:n,author:o,book_image:s,title:i,list_name:a}=e;return t=a,`<li class="book-category-list-item">\n            <div class="best-sellers-thumb"><img class="best-sellers-image" src=${s} alt=${i} data-id-img=${n}/><div class="book-thumb-overlay"><p class="book-overlay-text">quick view</p></div></div>\n            <div class="book-description-thumb"><h3 class="book-title">${i.length>18?i.slice(0,18)+"...":i}</h3>\n            <p class="book-description">${o}</p></div>\n        </li>`})).join("");return t=t.split(" ").map(((e,o,s)=>{if(s.indexOf(e)+1===s.length)return`<h1 class="best-sellers-header">${t.split(" ").slice(0,o).join(" ")}<span class="best-sellers-accent"> ${e}</span></h1><ul class="book-category-list">${n}</ul>`})),t.join("")},r=document.querySelector("#container-best"),c=()=>r.innerHTML="";r.innerHTML||(async()=>{try{const e=await(0,i.fetchTopBooks)(),t=a(e);r.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}})();i=s("014TN");const d=document.querySelector(".categories-item"),u=document.querySelector(".categories-item");let p=document.getElementsByClassName("categories-list");const m=document.querySelector("#container-best");u.addEventListener("click",(function(e){p===document.getElementsByClassName("categories-list")&&(p=e.target);return p.classList.remove("active"),p=e.target,p.classList.add("active"),p})),(0,i.fetchBooksCategoryList)().then((e=>{const t=e.map((({list_name:e})=>`<li class="categories-list" id=${e}>${e}</li>`)).join("");d.insertAdjacentHTML("beforeend",t)})).catch((e=>console.log(e))),u.addEventListener("click",(async function(e){if("LI"!==e.target.nodeName&&"All categories"===e.target.textContent)return;try{const t=await(0,i.fetchBooksByCategory)(e.target.textContent),n=l(t);c(),m.insertAdjacentHTML("beforeend",n)}catch(e){console.log(e)}})),u.addEventListener("click",(async function(e){if("All categories"===e.target.textContent)try{const e=await(0,i.fetchTopBooks)(),t=a(e);c(),m.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}})),s("b11DO");i=s("014TN");var h=s("hiPTG");const g=document.querySelector(".modal"),b=document.querySelector(".modal-card"),f=document.getElementById("container-best"),k=document.querySelector(".modal-window-text"),v=document.querySelector(".cls-button"),y=document.querySelector("[data-modal-backdrop]");let w="GF";function L(e){if("Escape"===e.code)return E(),$()}function S(e){return e.currentTarget.dataset.modal="close",E(),$()}function E(){v.removeEventListener("click",S,{once:"true"}),document.removeEventListener("keydown",L,{once:"true"}),y.removeEventListener("click",x)}function x(e){if(e.target===y)return E(),$()}function $(){g.classList.toggle("is-hidden"),y.classList.toggle("is-hidden"),document.body.classList.toggle("stop-scrolling")}function _(){return w=localStorage.getItem("user-id")?localStorage.getItem("user-id"):"GF",w}f.addEventListener("click",(function(e){if("IMG"===e.target.nodeName){const t=e.target.dataset.idImg;$(),_(),async function(e,t){try{!function(e,t){let{title:n,author:o,book_image:s="./image/shopping/dummy-book-tr.png",description:i,buy_links:a}=e;const l=a;let r="https://www.amazon.com",c="https://books.apple.com",d="https://bookshop.org";r=l[0].url,c=l[1].url,d=l[4].url,0===i.trim().length&&(i="Description is not available for that book");let u="";u=function({id:e,title:t,author:n,book_image:o,description:s,amazonUrl:i,appleUrl:a,bookShopUrl:l}){return`\n  <div class="modal-window">\n    <div class="picture">\n      <img class="card-img" src="${o}" alt="${s}" />\n    </div>\n    <div class="info">\n      <h1 class="titles">${t}</h1>\n      <h2 class="authors">${n}</h2>\n      <p class="descriptions">${s}</p>\n      <ul class="icons">\n        <li class="icon-link">\n          <a\n                    class="shopping-card-shop-link"\n                    href="${i}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Amazon link"\n                    ><img\n                      width="62"\n                      class="shopping-card-link-icon shopping-card-link-amazon"\n                      src=${T}\n                      alt="Amazon" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li class="icon-link">\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${a}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Apple Books link"\n                  >\n                    <img\n                      width="32"\n                      height="32"\n                      class="shopping-card-link-icon"\n                      src=${j}\n                      alt="Apple Books" loading="lazy"\n                    />\n                  </a></li>\n                <li class="icon-link">\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${l}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="BookShop link"\n                  >\n                    <img\n                      width="38"\n                      height="36"\n                      class="shopping-card-link-icon shopping-card-link-shopbook"\n                      src=${A}\n                      alt="BookShop" loading="lazy"\n                    />\n                  </a>\n        </li>\n      </ul>\n    </div>\n    <button\n    class="btn-action button pointer"\n    data-modal-submit="add" data-id=${e}\n    type="button">add to shopping list</button>\n  </div>`}({id:t,title:n,author:o,book_image:s,description:i,amazonUrl:r,appleUrl:c,bookShopUrl:d}),b.innerHTML="",b.insertAdjacentHTML("afterbegin",u)}(await(0,i.fetchBookById)(e),e);b.firstElementChild.lastElementChild.addEventListener("click",H),async function(e,t){try{(await(0,h.reedBookID)(t)).includes(e)&&(b.firstElementChild.lastElementChild.textContent="remove from the shopping list",k.textContent="This book is already in your cart",k.classList.remove("is-hidden"),b.firstElementChild.lastElementChild.dataset.modalSubmit="del")}catch(e){console.log(e)}}(e,t)}catch(e){console.log(e)}}(t,w),document.addEventListener("keydown",L,{once:"true"}),v.addEventListener("click",S,{once:"true"}),y.addEventListener("click",x)}}));var C;C=new URL(s("27Lyk").resolve("jI9re"),import.meta.url).toString();const T=new URL(C);var B;B=new URL(s("27Lyk").resolve("iUdC1"),import.meta.url).toString();const j=new URL(B);var q;q=new URL(s("27Lyk").resolve("jdnIm"),import.meta.url).toString();const A=new URL(q);function H(e){if(_(),"GF"!==w||0==w){const t=e.target.dataset.id;"add"===e.target.dataset.modalSubmit?((0,h.addBookID)(t,w),e.target.textContent="remove from the shopping list",k.textContent='Ð¡ongratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".',k.classList.remove("is-hidden"),e.target.dataset.modalSubmit="del"):((0,h.dellBookID)(t,w),e.target.textContent="add to shopping list",k.classList.add("is-hidden"),e.target.dataset.modalSubmit="add")}else w="underfined",$(),E(),async function(){const e="true"===U.getAttribute("aria-expanded")||!1;U.setAttribute("aria-expanded",!e),N.classList.toggle("is-hidden"),e?(document.body.style.overflow="scroll",I.reset()):document.body.style.overflow="hidden"}()}const U=document.querySelector("[data-authorization-open]"),N=document.querySelector("[data-authorization]"),I=document.querySelector(".authorization-window-form");s("hiPTG");i=s("014TN");const R=document.querySelector("#container-best");document.querySelector(".see-more-btn");R.addEventListener("click",(e=>{if("BUTTON"===e.target.nodeName){console.log(e.target.parentNode.firstChild.textContent);const t=e.target.parentNode.firstChild.textContent;c(),async function(e){try{c();const t=await(0,i.fetchBooksByCategory)(e),n=l(t);R.insertAdjacentHTML("beforeend",n)}catch(e){console.log(e)}}(t)}}));const z=document.querySelector(".scroll-up");window.addEventListener("scroll",(function(){window.onscroll=()=>{window.scrollY>700?z.classList.remove("scroll-up_hide"):window.scrollY<700&&z.classList.add("scroll-up_hide")}})),z.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}));
//# sourceMappingURL=index.e5398629.js.map
