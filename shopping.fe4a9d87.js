!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},s=e.parcelRequire7951;null==s&&((s=function(t){if(t in n)return n[t].exports;if(t in a){var e=a[t];delete a[t];var s={id:t,exports:{}};return n[t]=s,e.call(s.exports,s,s.exports),s.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){a[t]=e},e.parcelRequire7951=s),s("aVBI1"),s("9VC5X"),s("i8Q71"),s("xpKCW");var r=s("bpxeT"),i=s("2TvXO"),o=s("aVBI1"),c=document.querySelector(".shopping-list-list"),l=document.querySelector(".shopping-dummy-message"),p=document.querySelector(".shopping-paginator-list"),d=document.querySelector('button[data-page="first"]'),u=document.querySelector('button[data-page="second"]'),g=document.querySelector(".btn-hidden"),h=window.matchMedia("(min-width: 768px)"),f=document.querySelector(".support"),m=window.matchMedia("(max-width: 1439px)");function v(t){t.matches?f.classList.add("visually-hidden"):f.classList.remove("visually-hidden")}f.style.position="static",m.addListener(v),v(m);var L=[];!function(){if(!JSON.parse(localStorage.getItem("id")))return L=[],localStorage.setItem("id",JSON.stringify(L));L=JSON.parse(localStorage.getItem("id"))}();var b=3,x=1,y=1;function k(){JSON.parse(localStorage.getItem("id")).length>0?(l.classList.add("visually-hidden"),c.classList.remove("visually-hidden")):(c.classList.add("visually-hidden"),p.classList.add("visually-hidden"),l.classList.remove("visually-hidden"),c.removeEventListener("click",V),p.removeEventListener("click",T))}function S(){return L=JSON.parse(localStorage.getItem("id"))}function N(){b=h.matches?4:3,y=Math.ceil(JSON.parse(localStorage.getItem("id")).length/b)}function w(t){return x+=t,localStorage.page=x,x}function I(){C(x,b),q(x)}function C(t,e){A(t,e)}function O(t){d.textContent=Number.parseInt(d.textContent)+t,u.textContent=Number.parseInt(u.textContent)+t,g.textContent=Number.parseInt(g.textContent)+t}function q(t){d.textContent=t,u.textContent=t+1,g.textContent=t+2}function T(t){if(N(),!(S().length<=b||Number.parseInt(t.target.textContent)>y||Number.parseInt(t.target.textContent)===x))return"start"===t.target.dataset.page&&x>1?E():"last"===t.target.dataset.page?z():"first"===t.target.dataset.page?_(d):"second"===t.target.dataset.page&&y>=2?_(u):"third"===t.target.dataset.page&&y>=3?_(g):"more"===t.target.dataset.page?M(b):"next"===t.target.dataset.page?J():"end"===t.target.dataset.page?function(){if(2===y)return J();x!=y&&(B(),4===b?(g.classList.add("current-page"),q(y-2)):(u.classList.add("current-page"),q(y-1)),w(y-x),C(x,b))}():void 0}function _(t){w(Number.parseInt(t.textContent)-x),B(),t.classList.add("current-page"),C(x,b)}function B(){d.classList.remove("current-page"),u.classList.remove("current-page"),g.classList.remove("current-page")}function E(){B(),q(1),w(1-x),d.classList.add("current-page"),C(1,b)}function z(){if(!(x<=1))return 2===x?E():(3===b?d.classList.contains("current-page")?(B(),u.classList.add("current-page"),O(-2)):u.classList.contains("current-page")?(B(),d.classList.add("current-page")):O(-1):d.classList.contains("current-page")?(B(),g.classList.add("current-page"),O(-3)):u.classList.contains("current-page")?(B(),d.classList.add("current-page")):g.classList.contains("current-page")?(B(),u.classList.add("current-page")):O(-1),w(-1),C(x,b))}function J(){x>=y||(3!==b?(!function(){if(d.classList.contains("current-page"))B(),u.classList.add("current-page");else if(u.classList.contains("current-page"))B(),g.classList.add("current-page");else{if(g.classList.contains("current-page"))return M(b);O(1)}}(),w(1),C(x,b)):d.classList.contains("current-page")?(B(),u.classList.add("current-page")):u.classList.contains("current-page")?(B(),d.classList.add("current-page"),O(2)):O(1))}function M(t){if(Number.parseInt(d.textContent)+t-1<=y)return B(),d.classList.add("current-page"),O(4===t?3:2),w(d.textContent-x),C(x,t)}function A(t,e){var n,a;c.innerHTML="",k(),(n=t,a=e,S(),L.splice((n-1)*a,a)).forEach((function(t){!function(t){D.apply(this,arguments)}(t)})),c.addEventListener("click",V,{once:"true"}),p.addEventListener("click",T)}function D(){return(D=t(r)(t(i).mark((function e(n){return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.fetchBookById)(n);case 3:U(t.sent,n),t.next=14;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),k(),l.firstElementChild.textContent="Server is not available right now. Please, try later",p.classList.add("visually-hidden"),l.classList.remove("visually-hidden");case 14:case"end":return t.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function U(t,e){var n,a,s,r=t.title,i=void 0===r?"Title unknown":r,o=t.author,l=void 0===o?"Author unknown":o,d=t.book_image,u=void 0===d?"./image/shopping/dummy-book-tr.png":d,g=t.list_name,h=void 0===g?"No category":g,f=t.description,m=t.buy_links;n=m[0].url,a=m[1].url,s=m[4].url,0===f.trim().length&&(f="Description is not available for that book");var v;v='<li class="shopping-list-item"><div class="shopping-list-item-card">\n          <img\n            class="shopping-card-img"\n            src="'.concat(u,'"\n            alt="book cover"\n            width="100px"\n            height="142px" loading="lazy"\n          />\n          <div class="shopping-list-card-info">\n            <h2 class="shopping-card-title">').concat(i,'</h2>\n            <p class="shopping-card-category">').concat(h,'</p>\n            <p class="shopping-card-descr">').concat(f,'</p><p class="visually-hidden">\n              Description is not available for that book\n            </p>\n            <div class="shopping-card-bottom-container">\n              <p class="shopping-card-author">').concat(l,'</p>\n              <ul class="shopping-card-shop-list">\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="').concat(n,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Amazon link"\n                    ><img\n                      width="32px"\n                      class="shopping-card-link-icon shopping-card-link-amazon"\n                      src="./shop-amazon-62x19px.a7ec3af8.png"\n                      alt="Amazon" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="').concat(a,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Apple Books link"\n                  >\n                    <img\n                      width="16px"\n                      height="16px"\n                      class="shopping-card-link-icon"\n                      src="./shop-read-33x32px.a9f158e0.png"\n                      alt="Apple Books" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="').concat(s,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="BookShop link"\n                  >\n                    <img\n                      width="16px"\n                      height="16px"\n                      class="shopping-card-link-icon shopping-card-link-shopbook"\n                      src="./shop-book-shop-38x36px.eb5fbc1e.png"\n                      alt="BookShop" loading="lazy"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class="shopping-btn-dump" type="button" data-book="').concat(e,'">\n                <svg class="shopping-btn-dump-icon" width="16" height="16">\n                  <use href="./icons.d47e670f.svg#dump"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>'),c.insertAdjacentHTML("beforeend",v),p.classList.remove("visually-hidden")}function V(t){"use"!==t.target.nodeName&&"svg"!==t.target.nodeName&&"BUTTON"!==t.target.nodeName||function(t){var e=t.target.dataset.book,n=L.indexOf(e);if(S(),L.splice(n,1),localStorage.setItem("id",JSON.stringify(L)),N(),0===L.length)return A(x,b);if(x>y)return z();A(x,b)}(t)}x=Number.parseInt(localStorage.getItem("page"))>0?JSON.parse(localStorage.getItem("page")):1,S(),N(),I(),document.querySelector(".shopping-refresh").addEventListener("click",(function(){return I()}))}();
//# sourceMappingURL=shopping.fe4a9d87.js.map
