!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},s=t.parcelRequire7951;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire7951=s),s("aVBI1"),s("9VC5X"),s("i8Q71"),s("xpKCW");var i=s("bpxeT"),r=s("2TvXO"),o=s("aVBI1"),c=document.querySelector(".shopping-list-list"),l=document.querySelector(".shopping-dummy-message"),d=document.querySelector(".shopping-paginator-list"),p=document.querySelector('button[data-page="first"]'),u=document.querySelector('button[data-page="second"]'),g=document.querySelector(".btn-hidden"),h=window.matchMedia("(min-width: 768px)"),f=document.querySelector(".support"),m=window.matchMedia("(max-width: 1439px)");function v(e){e.matches?f.classList.add("visually-hidden"):f.classList.remove("visually-hidden")}f.style.position="static",m.addListener(v),v(m);var L=[];!function(){if(!JSON.parse(localStorage.getItem("id")))return L=[],localStorage.setItem("id",JSON.stringify(L));L=JSON.parse(localStorage.getItem("id"))}();var b=3,x=1,y=1;function k(){JSON.parse(localStorage.getItem("id")).length>0?(l.classList.add("visually-hidden"),c.classList.remove("visually-hidden")):(c.classList.add("visually-hidden"),d.classList.add("visually-hidden"),l.classList.remove("visually-hidden"),c.removeEventListener("click",V),d.removeEventListener("click",q))}function S(){return L=JSON.parse(localStorage.getItem("id"))}function N(){b=h.matches?4:3,y=Math.ceil(JSON.parse(localStorage.getItem("id")).length/b)}function w(e){return x+=e,localStorage.page=x,x}function I(){C(x,b),E(x)}function C(e,t){A(e,t)}function O(e){p.textContent=Number.parseInt(p.textContent)+e,u.textContent=Number.parseInt(u.textContent)+e,g.textContent=Number.parseInt(g.textContent)+e}function E(e){p.textContent=e,u.textContent=e+1,g.textContent=e+2}function q(e){if(N(),!(S().length<=b||Number.parseInt(e.target.textContent)>y||Number.parseInt(e.target.textContent)===x))return"start"===e.target.dataset.page&&x>1?B():"last"===e.target.dataset.page?z():"first"===e.target.dataset.page?T(p):"second"===e.target.dataset.page&&y>=2?T(u):"third"===e.target.dataset.page&&y>=3?T(g):"more"===e.target.dataset.page?M(b):"next"===e.target.dataset.page?J():"end"===e.target.dataset.page?function(){if(2===y)return J();x!=y&&(_(),4===b?(g.classList.add("current-page"),E(y-2)):(u.classList.add("current-page"),E(y-1)),w(y-x),C(x,b))}():void 0}function T(e){w(Number.parseInt(e.textContent)-x),_(),e.classList.add("current-page"),C(x,b)}function _(){p.classList.remove("current-page"),u.classList.remove("current-page"),g.classList.remove("current-page")}function B(){_(),E(1),w(1-x),p.classList.add("current-page"),C(1,b)}function z(){if(!(x<=1))return 2===x?B():(3===b?p.classList.contains("current-page")?(_(),u.classList.add("current-page"),O(-2)):u.classList.contains("current-page")?(_(),p.classList.add("current-page")):O(-1):p.classList.contains("current-page")?(_(),g.classList.add("current-page"),O(-3)):u.classList.contains("current-page")?(_(),p.classList.add("current-page")):g.classList.contains("current-page")?(_(),u.classList.add("current-page")):O(-1),w(-1),C(x,b))}function J(){x>=y||(3!==b?(!function(){if(p.classList.contains("current-page"))_(),u.classList.add("current-page");else if(u.classList.contains("current-page"))_(),g.classList.add("current-page");else{if(g.classList.contains("current-page"))return M(b);O(1)}}(),w(1),C(x,b)):p.classList.contains("current-page")?(_(),u.classList.add("current-page")):u.classList.contains("current-page")?(_(),p.classList.add("current-page"),O(2)):O(1))}function M(e){if(Number.parseInt(p.textContent)+e-1<=y)return _(),p.classList.add("current-page"),O(4===e?3:2),w(p.textContent-x),C(x,e)}function A(e,t){var n,a;c.innerHTML="",k(),(n=e,a=t,S(),L.splice((n-1)*a,a)).forEach((function(e){!function(e){D.apply(this,arguments)}(e)})),c.addEventListener("click",V,{once:"true"}),d.addEventListener("click",q)}function D(){return(D=e(i)(e(r).mark((function t(n){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.fetchBookById)(n);case 3:U(e.sent,n),e.next=14;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),k(),l.firstElementChild.textContent="Server is not available right now. Please, try later",d.classList.add("visually-hidden"),l.classList.remove("visually-hidden");case 14:S(),L.length<=b?(d.classList.add("visually-hidden"),d.removeEventListener("click",q)):(d.classList.remove("visually-hidden"),d.addEventListener("click",q));case 16:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function U(e,t){var n,a,s,i=e.title,r=void 0===i?"Title unknown":i,o=e.author,l=void 0===o?"Author unknown":o,d=e.book_image,p=void 0===d?"./image/shopping/dummy-book-tr.png":d,u=e.list_name,g=void 0===u?"No category":u,h=e.description,f=e.buy_links;n=f[0].url,a=f[1].url,s=f[4].url,0===h.trim().length&&(h="Description is not available for that book");var m;m='<li class="shopping-list-item"><div class="shopping-list-item-card">\n          <img\n            class="shopping-card-img"\n            src="'.concat(p,'"\n            alt="book cover"\n            width="100px"\n            height="142px" loading="lazy"\n          />\n          <div class="shopping-list-card-info">\n            <h2 class="shopping-card-title">').concat(r,'</h2>\n            <p class="shopping-card-category">').concat(g,'</p>\n            <p class="shopping-card-descr">').concat(h,'</p><p class="visually-hidden">\n              Description is not available for that book\n            </p>\n            <div class="shopping-card-bottom-container">\n              <p class="shopping-card-author">').concat(l,'</p>\n              <ul class="shopping-card-shop-list">\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="').concat(n,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Amazon link"\n                    ><img\n                      width="32px"\n                      class="shopping-card-link-icon shopping-card-link-amazon"\n                      src="./shop-amazon-62x19px.a7ec3af8.png"\n                      alt="Amazon" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="').concat(a,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Apple Books link"\n                  >\n                    <img\n                      width="16px"\n                      height="16px"\n                      class="shopping-card-link-icon"\n                      src="./shop-read-33x32px.a9f158e0.png"\n                      alt="Apple Books" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="').concat(s,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="BookShop link"\n                  >\n                    <img\n                      width="16px"\n                      height="16px"\n                      class="shopping-card-link-icon shopping-card-link-shopbook"\n                      src="./shop-book-shop-38x36px.eb5fbc1e.png"\n                      alt="BookShop" loading="lazy"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class="shopping-btn-dump" type="button" data-book="').concat(t,'">\n                <svg class="shopping-btn-dump-icon" width="16" height="16">\n                  <use href="./icons.d47e670f.svg#dump"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>'),c.insertAdjacentHTML("beforeend",m)}function V(e){"use"!==e.target.nodeName&&"svg"!==e.target.nodeName&&"BUTTON"!==e.target.nodeName||function(e){var t=e.target.dataset.book,n=L.indexOf(t);if(S(),L.splice(n,1),localStorage.setItem("id",JSON.stringify(L)),N(),0===L.length)return A(x,b);if(x>y)return z();A(x,b)}(e)}x=Number.parseInt(localStorage.getItem("page"))>0?JSON.parse(localStorage.getItem("page")):1,S(),N(),I(),document.querySelector(".shopping-refresh").addEventListener("click",(function(){return I()}))}();
//# sourceMappingURL=shopping.be395d85.js.map
