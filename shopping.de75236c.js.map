{"mappings":"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","sources":["src/js/shopping.js","src/js/shopping-list.js"],"sourcesContent":["import './serviceApi';\nimport './theme';\nimport './authorization';\nimport './header';\nimport './support';\nimport './shopping-list';\n","import { fetchBookById } from './serviceApi';\nimport { dellBookID, reedBookID } from './authorization.js';\nimport { type } from 'jquery';\n\nconst list = document.querySelector('.shopping-list-list');\nconst dummyMessage = document.querySelector('.shopping-dummy-message');\nconst controller = document.querySelector('.shopping-paginator-list');\nconst refresh = document.querySelector('.shopping-refresh-btn');\n\nconst startBtn = document.querySelector('button[data-page=\"start\"]');\nconst lastBtn = document.querySelector('button[data-page=\"last\"]');\nconst firstBtn = document.querySelector('button[data-page=\"first\"]');\nconst secondBtn = document.querySelector('button[data-page=\"second\"]');\nconst thirdBtn = document.querySelector('.btn-hidden');\nconst moreBtn = document.querySelector('button[data-page=\"more\"]');\nconst nextBtn = document.querySelector('button[data-page=\"next\"]');\nconst endBtn = document.querySelector('button[data-page=\"end\"]');\n\nconst mediaQuery = window.matchMedia('(min-width: 768px)');\n\nconst support = document.querySelector('.support');\n\nconst mediaQuerySupport = window.matchMedia('(max-width: 1439px)');\nsupport.style.position = 'static';\n\nfunction handleDesktopChange(e) {\n  if (e.matches) {\n    support.classList.add('visually-hidden');\n  } else {\n    support.classList.remove('visually-hidden');\n  }\n}\nmediaQuerySupport.addListener(handleDesktopChange);\nhandleDesktopChange(mediaQuerySupport);\n\nlet user = '';\n\n// -----------\n// let booksInCart - кількість книг, у кошику;\n// paginator - кількість книг, що буде відображатись на сторінці.\n// page - сторінка списку книг.\n// totalPages - скільки займатимуть сторінок книги з localStorage.\n\nlet storageOfBooksId = [];\nlet booksInCart = 0;\nlet paginator = 3;\nlet page = 1;\nlet totalPages = 1;\n\nfunction fetchUser() {\n  user = localStorage.getItem('user-id');\n  return user;\n}\nfetchUser();\n// ----------------------------\n\nfunction recordArrayOfBooks(data) {\n  storageOfBooksId = data;\n  return storageOfBooksId;\n}\nfunction recordBookInCart(data) {\n  booksInCart = data.length;\n  return booksInCart;\n}\n// --------Функція, що повертає кількість книг, що вміщує сторінка і загальну кількість сторінок,\n//   яку при цьому займуть книги у кошику------\n\nfunction fetchPaginator() {\n  if (mediaQuery.matches) {\n    // console.log('4 on page');\n    return (paginator = 4);\n  } else {\n    // console.log('3 on page');\n    return (paginator = 3);\n  }\n}\n\nfunction refreshTotalPages() {\n  totalPages = Math.ceil(booksInCart / paginator);\n  return totalPages;\n}\nfunction checkCurrentPage() {\n  if (Number.parseInt(localStorage.getItem('page')) > 0) {\n    page = Number.parseInt(localStorage.getItem('page'));\n    console.log(`cur = ${page} 1`);\n    console.log(typeof page);\n    return page;\n  } else if (page > totalPages) {\n    page = totalPages;\n    return page;\n    console.log(`cur = ${page} 2`);\n  } else {\n    page = 1;\n    return page;\n    console.log(`cur = ${page} 3`);\n  }\n}\n// формування повідомлення про пустий кошик----\nfunction showMessageIfEmpty() {\n  if (booksInCart > 0) {\n    dummyMessage.classList.add('visually-hidden');\n    list.classList.remove('visually-hidden');\n    list.addEventListener('click', deleteBook, { once: 'true' });\n  } else {\n    list.classList.add('visually-hidden');\n    controller.classList.add('visually-hidden');\n    dummyMessage.classList.remove('visually-hidden');\n    list.removeEventListener('click', deleteBook, { once: 'true' });\n    controller.removeEventListener('click', paginate);\n  }\n}\n// ---------\n\n// ------------Рендер останньої сесії---------------------------------\n\nasync function renderLastSession() {\n  try {\n    const data = await reedBookID(user);\n\n    recordArrayOfBooks(data);\n\n    recordBookInCart(data);\n\n    fetchPaginator();\n\n    refreshTotalPages();\n\n    checkCurrentPage();\n    pageNumeration(page);\n    list.innerHTML = '';\n    showMessageIfEmpty();\n\n    makeArrayToPaginate(page, data).forEach(id => {\n      renderCardFromData(id);\n    });\n    pagesToShow();\n  } catch (error) {\n    console.log(error);\n  }\n}\nrenderLastSession();\n// ----------------------------------------\n// -----------Функція зміни відображення кількості книжок на сторінці-------------\nfunction handleTabletChange(mediaQuery) {\n  fetchPaginator();\n  refreshTotalPages();\n  if (mediaQuery.matches) {\n    console.log('do not hide');\n    thirdBtn.classList.remove('visually-hidden');\n    // page = Math.ceil(booksOnBusket / 4);\n    // localStorage.page = page;\n    if (list.children.length === 4) {\n      console.log('4 to hide');\n      list.lastElementChild.classList.remove('visually-hidden');\n    }\n  } else {\n    console.log('tablet else');\n    thirdBtn.classList.add('visually-hidden');\n\n    // page = Math.ceil(booksOnBusket / 3);\n    if (list.children.length === 4) {\n      list.lastElementChild.classList.add('visually-hidden');\n    }\n  }\n\n  // localStorage.page = page;\n  pagesToShow();\n  // pageNumeration(page);\n}\nmediaQuery.addListener(handleTabletChange);\nhandleTabletChange(mediaQuery);\n\n/////////////Функція, що перезаписує значення поточної сторінки і зберігає його у localStorage\nfunction changePage(adduct) {\n  page += adduct;\n  localStorage.page = page;\n  return page;\n}\n// ------------------------------------\nfunction makeArrayToPaginate(page, data) {\n  localStorage.page = page;\n  const arrayOfBooksToPaginate = data.splice((page - 1) * paginator, paginator);\n  return arrayOfBooksToPaginate;\n}\n\nfunction changeNumeration(weight) {\n  firstBtn.textContent = Number.parseInt(firstBtn.textContent) + weight;\n  secondBtn.textContent = Number.parseInt(secondBtn.textContent) + weight;\n  thirdBtn.textContent = Number.parseInt(thirdBtn.textContent) + weight;\n}\nfunction pageNumeration(pageToRec) {\n  // console.log(page);\n  // console.log(typeof page);\n  firstBtn.textContent = Number.parseInt(pageToRec);\n  secondBtn.textContent = Number.parseInt(pageToRec + 1);\n  thirdBtn.textContent = Number.parseInt(pageToRec + 2);\n}\n// ------функція, що перемальовує сторінку переліку книг у кошику------------------------------------------------\n\nasync function renderPage(page) {\n  try {\n    const data = await reedBookID(user);\n    await recordArrayOfBooks(data);\n    recordBookInCart(data);\n    fetchPaginator();\n    refreshTotalPages();\n    checkCurrentPage();\n    // pageNumeration(page);\n    list.innerHTML = '';\n    showMessageIfEmpty();\n    makeArrayToPaginate(page, data).forEach(id => {\n      renderCardFromData(id);\n    });\n\n    pagesToShow();\n  } catch (error) {\n    console.log(error);\n  }\n}\n// ------------------------------------------------------\n\n// ------------------------------------------------------\n\n// -----запит данних із серверу----\nasync function renderCardFromData(id) {\n  try {\n    const data = await fetchBookById(id);\n    renderMarkup(data, id);\n  } catch (error) {\n    console.log(error);\n    showMessageIfEmpty();\n    controller.classList.add('visually-hidden');\n    dummyMessage.firstElementChild.textContent =\n      'Server is not available right now. Please, try later';\n    dummyMessage.classList.remove('visually-hidden');\n  }\n}\n// ----------формування шаблону-----------\nfunction renderMarkup(book, id) {\n  let {\n    title = 'Title unknown',\n    author = 'Author unknown',\n    book_image = './image/shopping/dummy-book-tr.png',\n    list_name = 'No category',\n    description,\n    buy_links,\n  } = book;\n  const arrayOfShops = buy_links;\n  let amazonUrl = 'https://www.amazon.com';\n  let appleUrl = 'https://books.apple.com';\n  let bookShopUrl = 'https://bookshop.org';\n  amazonUrl = arrayOfShops[0].url;\n  appleUrl = arrayOfShops[1].url;\n  bookShopUrl = arrayOfShops[4].url;\n  if (description.trim().length === 0) {\n    description = 'Description is not available for that book';\n  }\n\n  let markup = '';\n  markup = `<li class=\"shopping-list-item\"><div class=\"shopping-list-item-card\">\n          <img\n            class=\"shopping-card-img\"\n            src=\"${book_image}\"\n            alt=\"book cover\"\n            width=\"100\"\n            height=\"142\" loading=\"lazy\"\n          />\n          <div class=\"shopping-list-card-info\">\n            <h2 class=\"shopping-card-title\">${title}</h2>\n            <p class=\"shopping-card-category\">${list_name}</p>\n            <p class=\"shopping-card-descr\">${description}</p><p class=\"visually-hidden\">\n              Description is not available for that book\n            </p>\n            <div class=\"shopping-card-bottom-container\">\n              <p class=\"shopping-card-author\">${author}</p>\n              <ul class=\"shopping-card-shop-list\">\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${amazonUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"Amazon link\"\n                    ><img\n                      width=\"32\"\n                      class=\"shopping-card-link-icon shopping-card-link-amazon\"\n                      src=\"./shop-amazon-62x19px.a7ec3af8.png\"\n                      alt=\"Amazon\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${appleUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"Apple Books link\"\n                  >\n                    <img\n                      width=\"16\"\n                      height=\"16\"\n                      class=\"shopping-card-link-icon\"\n                      src=\"./shop-read-33x32px.a9f158e0.png\"\n                      alt=\"Apple Books\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${bookShopUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"BookShop link\"\n                  >\n                    <img\n                      width=\"16\"\n                      height=\"16\"\n                      class=\"shopping-card-link-icon shopping-card-link-shopbook\"\n                      src=\"./shop-book-shop-38x36px.eb5fbc1e.png\"\n                      alt=\"BookShop\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class=\"shopping-btn-dump\" type=\"button\" data-book=\"${id}\">\n                <svg class=\"shopping-btn-dump-icon\"  data-book=\"${id}\" width=\"16\" height=\"16\">\n                  <use  data-book=\"${id}\" href=\"./icons-all.568e592f.svg#dump\"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>`;\n\n  list.insertAdjacentHTML('beforeend', markup);\n}\n// ------------\n\n// -------видалення книги із кошика---------\n\nfunction deleteBook(event) {\n  if (\n    event.target.nodeName === 'use' ||\n    event.target.nodeName === 'svg' ||\n    event.target.nodeName === 'BUTTON'\n  ) {\n    const idToDelete = event.target.dataset.book;\n    dellBookID(idToDelete, user);\n    rerenderPage(event);\n  }\n}\n\nrefresh.addEventListener('click', refreshPage);\n\nfunction refreshPage() {\n  refresh.style.color = 'var(--main-text-color)';\n  renderPage();\n}\n\nfunction rerenderPage() {\n  fetchPaginator();\n\n  if (booksInCart - 1 === 0) {\n    list.classList.add('visually-hidden');\n    controller.classList.add('visually-hidden');\n    dummyMessage.classList.remove('visually-hidden');\n    list.removeEventListener('click', deleteBook, { once: 'true' });\n    controller.removeEventListener('click', paginate);\n  }\n  if (page > Math.ceil((booksInCart - 1) / paginator)) {\n    return lastBtnAction();\n  }\n  renderPage(page);\n}\n\n// --------------------------Пагінація------------------------------------\nfunction paginate(event) {\n  fetchPaginator();\n  refreshTotalPages();\n\n  if (booksInCart <= paginator) {\n    return;\n  }\n\n  if (Number.parseInt(event.target.textContent) > totalPages) {\n    return;\n  }\n\n  if (Number.parseInt(event.target.textContent) === page) {\n    return;\n  }\n  if (event.target.dataset.page === 'start') {\n    if (page > 1) {\n      return startBtnAction();\n    }\n  }\n  if (event.target.dataset.page === 'last') {\n    return lastBtnAction();\n  }\n  if (event.target.dataset.page === 'first') {\n    return actionByNumeredBtns(firstBtn);\n  }\n\n  if (event.target.dataset.page === 'second') {\n    if (totalPages >= 2) {\n      return actionByNumeredBtns(secondBtn);\n    }\n  }\n  if (event.target.dataset.page === 'third') {\n    if (totalPages >= 3) {\n      return actionByNumeredBtns(thirdBtn);\n    }\n  }\n  if (event.target.dataset.page === 'more') {\n    return moreBtnAction(paginator);\n  }\n\n  if (event.target.dataset.page === 'next') {\n    return nextBtnAction();\n  }\n  if (event.target.dataset.page === 'end') {\n    return endBtnAction();\n  }\n}\n\nfunction actionByNumeredBtns($numeredBtn) {\n  changePage(Number.parseInt($numeredBtn.textContent) - page);\n  removingCurrentBtnStyle();\n  $numeredBtn.classList.add('current-page');\n  renderPage(page);\n}\n\nfunction removingCurrentBtnStyle() {\n  firstBtn.classList.remove('current-page');\n  secondBtn.classList.remove('current-page');\n  thirdBtn.classList.remove('current-page');\n}\n\nfunction startBtnAction() {\n  removingCurrentBtnStyle();\n  pageNumeration(1);\n  changePage(-page + 1);\n  firstBtn.classList.add('current-page');\n  renderPage(1);\n  return;\n}\n\nfunction lastBtnAction() {\n  if (page <= 1) {\n    return;\n  }\n  if (page === 2) {\n    console.log('page ===2');\n    return startBtnAction();\n  }\n\n  if (paginator === 3) {\n    lastBtnActionWithThreeBooksPerPage();\n  } else {\n    lastBtnActionWithFourBooksPerPage();\n  }\n  changePage(-1);\n  return renderPage(page);\n}\n\nfunction lastBtnActionWithThreeBooksPerPage() {\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n    changeNumeration(-2);\n    console.log('s 3 next');\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n  } else {\n    changeNumeration(-1);\n  }\n}\n\nfunction lastBtnActionWithFourBooksPerPage() {\n  if (firstBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    thirdBtn.classList.add('current-page');\n    changeNumeration(-3);\n  } else if (secondBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n  } else if (thirdBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  }\n  if (page === 3) {\n    if (firstBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      secondBtn.classList.add('current-page');\n      changeNumeration(-2);\n    } else if (secondBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      firstBtn.classList.add('current-page');\n    } else {\n      removingCurrentBtnStyle();\n      secondBtn.classList.add('current-page');\n    }\n  }\n}\n\nfunction nextBtnAction() {\n  if (page >= totalPages) {\n    return;\n  }\n  if (paginator === 3) {\n    nextBtnActionWithThreeBooksPerPage();\n  } else {\n    nextBtnActionWithFourBooksPerPage();\n  }\n  console.log('next');\n  changePage(1);\n  renderPage(page);\n}\n\nfunction moreBtnAction() {\n  if (Number.parseInt(firstBtn.textContent) + paginator - 1 <= totalPages) {\n    console.log('more');\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n    if (paginator === 4) {\n      changeNumeration(3);\n    } else {\n      changeNumeration(2);\n    }\n    changePage(firstBtn.textContent - page);\n    return renderPage(page);\n  }\n}\n\nfunction nextBtnActionWithThreeBooksPerPage() {\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n    changeNumeration(2);\n  } else {\n    changeNumeration(1);\n  }\n}\n\nfunction nextBtnActionWithFourBooksPerPage() {\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    thirdBtn.classList.add('current-page');\n  } else if (thirdBtn.classList.contains('current-page')) {\n    return moreBtnAction(paginator);\n  } else {\n    changeNumeration(1);\n  }\n}\n\nfunction endBtnAction() {\n  if (totalPages === 2) {\n    return nextBtnAction();\n  }\n\n  removingCurrentBtnStyle();\n  if (paginator === 4) {\n    thirdBtn.classList.add('current-page');\n    console.log(`end but totalapages ${totalPages}`);\n    pageNumeration(totalPages - 2);\n  } else {\n    secondBtn.classList.add('current-page');\n    console.log(`totalapages ${totalPages}`);\n    pageNumeration(totalPages - 1);\n  }\n\n  changePage(totalPages - page);\n  renderPage(page);\n}\n// --------------------\n\nfunction pagesToShow() {\n  console.log(`total pages ${totalPages}`);\n  console.log(`page ${page}`);\n  console.log(`booksInCart ${booksInCart}`);\n  if (totalPages <= 1) {\n    controller.classList.add('visually-hidden');\n    controller.removeEventListener('click', paginate);\n  } else {\n    controller.classList.remove('visually-hidden');\n    controller.addEventListener('click', paginate);\n  }\n\n  // const difr = totalPages - page;\n\n  if (paginator === 3) {\n    if (page > 2) {\n      startBtn.classList.remove('visually-hidden');\n    }\n    if (page <= 2) {\n      startBtn.classList.add('visually-hidden');\n    }\n    if (page > 2) {\n      lastBtn.classList.remove('visually-hidden');\n    } else if (page <= 2 && !firstBtn.classList.contains('current-page')) {\n      console.log('p <= 2 1!=c');\n      lastBtn.classList.add('visually-hidden');\n    } else {\n      lastBtn.classList.add('visually-hidden');\n    }\n    if (totalPages - page > 2) {\n      moreBtn.classList.remove('visually-hidden');\n    }\n    if (\n      totalPages - page === 1 &&\n      secondBtn.classList.contains('current-page')\n    ) {\n      nextBtn.classList.remove('visually-hidden');\n    } else if (totalPages - page > 1) {\n      nextBtn.classList.remove('visually-hidden');\n    }\n    if (totalPages - page <= 1 && firstBtn.classList.contains('current-page')) {\n      console.log('-next <=1 &&');\n      nextBtn.classList.add('visually-hidden');\n    } else if (totalPages - page <= 1) {\n      console.log('-next <=1');\n      nextBtn.classList.add('visually-hidden');\n    }\n    if (totalPages - page >= 3) {\n      endBtn.classList.remove('visually-hidden');\n    }\n    if (totalPages - page < 3 && firstBtn.classList.contains('current-page')) {\n      endBtn.classList.remove('visually-hidden');\n    } else if (totalPages - page < 3) {\n      endBtn.classList.add('visually-hidden');\n    }\n  }\n\n  if (paginator === 4) {\n    if (page === 3 && firstBtn.classList.contains('current-page')) {\n      startBtn.classList.remove('visually-hidden');\n    } else if (page > 3) {\n      startBtn.classList.remove('visually-hidden');\n      lastBtn.classList.remove('visually-hidden');\n    }\n    if (page <= 3 && thirdBtn.classList.contains('current-page')) {\n      startBtn.classList.add('visually-hidden');\n      lastBtn.classList.add('visually-hidden');\n    } else if (page <= 3 && secondBtn.classList.contains('current-page')) {\n      startBtn.classList.add('visually-hidden');\n    }\n    if (page < 2) {\n      lastBtn.classList.add('visually-hidden');\n      startBtn.classList.add('visually-hidden');\n    }\n    if (totalPages === page && thirdBtn.classList.contains('current-page')) {\n      thirdBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages - page <= 1 &&\n      thirdBtn.classList.contains('current-page')\n    ) {\n      thirdBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages - page <= 1 &&\n      firstBtn.classList.contains('current-page')\n    ) {\n      thirdBtn.classList.add('visually-hidden');\n    } else if (\n      totalPages === page &&\n      !thirdBtn.classList.contains('current-page')\n    ) {\n      console.log('t=p && !3c');\n      thirdBtn.classList.add('visually-hidden');\n    } else if (\n      totalPages - page >= 2 &&\n      firstBtn.classList.contains('current-page')\n    ) {\n      thirdBtn.classList.remove('visually-hidden');\n    }\n    if (totalPages - page >= 3) {\n      moreBtn.classList.remove('visually-hidden');\n    }\n    if (totalPages - page <= 2) {\n      moreBtn.classList.add('visually-hidden');\n    }\n    if (totalPages - page <= 2 && firstBtn.classList.contains('current-page')) {\n      nextBtn.classList.add('visually-hidden');\n    }\n    if (totalPages - page <= 1 && thirdBtn.classList.contains('current-page')) {\n      nextBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages - page <= 1 &&\n      !thirdBtn.classList.contains('current-page')\n    ) {\n      console.log('<1 && 3!c');\n      nextBtn.classList.add('visually-hidden');\n    } else if (totalPages - page <= 1) {\n      nextBtn.classList.add('visually-hidden');\n    } else if (totalPages - page > 2) {\n      nextBtn.classList.remove('visually-hidden');\n    }\n    if (totalPages - page > 3) {\n      endBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages - page < 3 &&\n      firstBtn.classList.contains('current-page')\n    ) {\n      endBtn.classList.add('visually-hidden');\n    } else if (totalPages - page < 3) {\n      endBtn.classList.add('visually-hidden');\n    }\n  }\n  if (page >= 2 && firstBtn.classList.contains('current-page')) {\n    console.log('p = 2 1=c');\n    lastBtn.classList.remove('visually-hidden');\n  }\n  if (totalPages > page) {\n    secondBtn.classList.remove('visually-hidden');\n  }\n  if (totalPages - page <= 0 && firstBtn.classList.contains('current-page')) {\n    secondBtn.classList.add('visually-hidden');\n  }\n  if (totalPages - page <= 1) {\n    moreBtn.classList.add('visually-hidden');\n  }\n  if (totalPages - page <= 0) {\n    console.log('-next');\n    moreBtn.classList.add('visually-hidden');\n    nextBtn.classList.add('visually-hidden');\n    endBtn.classList.add('visually-hidden');\n  }\n  if (totalPages - page <= 1) {\n    endBtn.classList.add('visually-hidden');\n  }\n}\n"],"names":["parcelRequire","$014TN","$a3be1a30f1dc577d$var$list","document","querySelector","$a3be1a30f1dc577d$var$dummyMessage","$a3be1a30f1dc577d$var$controller","$a3be1a30f1dc577d$var$refresh","$a3be1a30f1dc577d$var$startBtn","$a3be1a30f1dc577d$var$lastBtn","$a3be1a30f1dc577d$var$firstBtn","$a3be1a30f1dc577d$var$secondBtn","$a3be1a30f1dc577d$var$thirdBtn","$a3be1a30f1dc577d$var$moreBtn","$a3be1a30f1dc577d$var$nextBtn","$a3be1a30f1dc577d$var$endBtn","$a3be1a30f1dc577d$var$mediaQuery","window","matchMedia","$a3be1a30f1dc577d$var$support","$a3be1a30f1dc577d$var$mediaQuerySupport","$a3be1a30f1dc577d$var$handleDesktopChange","e","matches","classList","add","remove","style","position","addListener","$a3be1a30f1dc577d$var$user","$a3be1a30f1dc577d$var$storageOfBooksId","$a3be1a30f1dc577d$var$booksInCart","$a3be1a30f1dc577d$var$paginator","$a3be1a30f1dc577d$var$page","$a3be1a30f1dc577d$var$totalPages","$a3be1a30f1dc577d$var$recordArrayOfBooks","data","$a3be1a30f1dc577d$var$recordBookInCart","length","$a3be1a30f1dc577d$var$fetchPaginator","$a3be1a30f1dc577d$var$refreshTotalPages","Math","ceil","$a3be1a30f1dc577d$var$checkCurrentPage","Number","parseInt","localStorage","getItem","console","log","$a3be1a30f1dc577d$var$showMessageIfEmpty","addEventListener","$a3be1a30f1dc577d$var$deleteBook","once","removeEventListener","$a3be1a30f1dc577d$var$paginate","$a3be1a30f1dc577d$var$handleTabletChange","mediaQuery1","children","lastElementChild","$a3be1a30f1dc577d$var$pagesToShow","$a3be1a30f1dc577d$var$changePage","adduct","page","$a3be1a30f1dc577d$var$makeArrayToPaginate","page1","splice","$a3be1a30f1dc577d$var$changeNumeration","weight","textContent","$a3be1a30f1dc577d$var$pageNumeration","pageToRec","async","$a3be1a30f1dc577d$var$renderPage","page2","$hiPTG","reedBookID","innerHTML","forEach","id","$a3be1a30f1dc577d$var$renderCardFromData","error","book","title","author","book_image","list_name","description","buy_links","arrayOfShops","amazonUrl","appleUrl","bookShopUrl","url","trim","markup","insertAdjacentHTML","$a3be1a30f1dc577d$var$renderMarkup","fetchBookById","firstElementChild","event","target","nodeName","idToDelete","dataset","dellBookID","$a3be1a30f1dc577d$var$lastBtnAction","$a3be1a30f1dc577d$var$rerenderPage","$a3be1a30f1dc577d$var$startBtnAction","$a3be1a30f1dc577d$var$actionByNumeredBtns","$a3be1a30f1dc577d$var$moreBtnAction","$a3be1a30f1dc577d$var$nextBtnAction","$a3be1a30f1dc577d$var$removingCurrentBtnStyle","$a3be1a30f1dc577d$var$endBtnAction","$numeredBtn","contains","$a3be1a30f1dc577d$var$lastBtnActionWithFourBooksPerPage","$a3be1a30f1dc577d$var$nextBtnActionWithFourBooksPerPage","$a3be1a30f1dc577d$var$renderLastSession","color"],"version":3,"file":"shopping.de75236c.js.map"}