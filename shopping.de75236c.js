var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},t={},n=e.parcelRequire7951;null==n&&((n=function(e){if(e in s)return s[e].exports;if(e in t){var n=t[e];delete t[e];var a={id:e,exports:{}};return s[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,s){t[e]=s},e.parcelRequire7951=n),n("014TN"),n("iO6Mx"),n("hiPTG"),n("70IEE"),n("b11DO");var a=n("014TN"),i=n("hiPTG");n("6KOho");const l=document.querySelector(".shopping-list-list"),o=document.querySelector(".shopping-dummy-message"),c=document.querySelector(".shopping-paginator-list"),r=document.querySelector(".shopping-refresh-btn"),d=document.querySelector('button[data-page="start"]'),u=document.querySelector('button[data-page="last"]'),p=document.querySelector('button[data-page="first"]'),g=document.querySelector('button[data-page="second"]'),h=document.querySelector(".btn-hidden"),v=document.querySelector('button[data-page="more"]'),L=document.querySelector('button[data-page="next"]'),m=document.querySelector('button[data-page="end"]'),y=window.matchMedia("(min-width: 768px)"),f=document.querySelector(".support"),b=window.matchMedia("(max-width: 1439px)");function k(e){e.matches?f.classList.add("visually-hidden"):f.classList.remove("visually-hidden")}f.style.position="static",b.addListener(k),k(b);let x="",w=[],I=0,N=3,S=1,C=1;function E(e){return w=e,w}function $(e){return I=e.length,I}function q(){return N=y.matches?4:3}function T(){return C=Math.ceil(I/N),C}function B(){return Number.parseInt(localStorage.getItem("page"))>0?(S=Number.parseInt(localStorage.getItem("page")),console.log(`cur = ${S} 1`),console.log(typeof S),S):S>C?(S=C,S):(S=1,S)}function z(){I>0?(o.classList.add("visually-hidden"),l.classList.remove("visually-hidden"),l.addEventListener("click",U,{once:"true"})):(l.classList.add("visually-hidden"),c.classList.add("visually-hidden"),o.classList.remove("visually-hidden"),l.removeEventListener("click",U,{once:"true"}),c.removeEventListener("click",G))}function M(e){q(),T(),e.matches?(console.log("do not hide"),h.classList.remove("visually-hidden"),4===l.children.length&&(console.log("4 to hide"),l.lastElementChild.classList.remove("visually-hidden"))):(console.log("tablet else"),h.classList.add("visually-hidden"),4===l.children.length&&l.lastElementChild.classList.add("visually-hidden")),V()}function D(e){return S+=e,localStorage.page=S,S}function _(e,s){localStorage.page=e;return s.splice((e-1)*N,N)}function O(e){p.textContent=Number.parseInt(p.textContent)+e,g.textContent=Number.parseInt(g.textContent)+e,h.textContent=Number.parseInt(h.textContent)+e}function A(e){p.textContent=Number.parseInt(e),g.textContent=Number.parseInt(e+1),h.textContent=Number.parseInt(e+2)}async function H(e){try{const s=await(0,i.reedBookID)(x);await E(s),$(s),q(),T(),B(),l.innerHTML="",z(),_(e,s).forEach((e=>{P(e)})),V()}catch(e){console.log(e)}}async function P(e){try{!function(e,s){let{title:t="Title unknown",author:n="Author unknown",book_image:a="./image/shopping/dummy-book-tr.png",list_name:i="No category",description:o,buy_links:c}=e;const r=c;let d="https://www.amazon.com",u="https://books.apple.com",p="https://bookshop.org";d=r[0].url,u=r[1].url,p=r[4].url,0===o.trim().length&&(o="Description is not available for that book");let g="";g=`<li class="shopping-list-item"><div class="shopping-list-item-card">\n          <img\n            class="shopping-card-img"\n            src="${a}"\n            alt="book cover"\n            width="100"\n            height="142" loading="lazy"\n          />\n          <div class="shopping-list-card-info">\n            <h2 class="shopping-card-title">${t}</h2>\n            <p class="shopping-card-category">${i}</p>\n            <p class="shopping-card-descr">${o}</p><p class="visually-hidden">\n              Description is not available for that book\n            </p>\n            <div class="shopping-card-bottom-container">\n              <p class="shopping-card-author">${n}</p>\n              <ul class="shopping-card-shop-list">\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${d}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Amazon link"\n                    ><img\n                      width="32"\n                      class="shopping-card-link-icon shopping-card-link-amazon"\n                      src="./shop-amazon-62x19px.a7ec3af8.png"\n                      alt="Amazon" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${u}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Apple Books link"\n                  >\n                    <img\n                      width="16"\n                      height="16"\n                      class="shopping-card-link-icon"\n                      src="./shop-read-33x32px.a9f158e0.png"\n                      alt="Apple Books" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${p}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="BookShop link"\n                  >\n                    <img\n                      width="16"\n                      height="16"\n                      class="shopping-card-link-icon shopping-card-link-shopbook"\n                      src="./shop-book-shop-38x36px.eb5fbc1e.png"\n                      alt="BookShop" loading="lazy"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class="shopping-btn-dump" type="button" data-book="${s}">\n                <svg class="shopping-btn-dump-icon"  data-book="${s}" width="16" height="16">\n                  <use  data-book="${s}" href="./icons-all.568e592f.svg#dump"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>`,l.insertAdjacentHTML("beforeend",g)}(await(0,a.fetchBookById)(e),e)}catch(e){console.log(e),z(),c.classList.add("visually-hidden"),o.firstElementChild.textContent="Server is not available right now. Please, try later",o.classList.remove("visually-hidden")}}function U(e){if("use"===e.target.nodeName||"svg"===e.target.nodeName||"BUTTON"===e.target.nodeName){const s=e.target.dataset.book;(0,i.dellBookID)(s,x),function(){q(),I-1==0&&(l.classList.add("visually-hidden"),c.classList.add("visually-hidden"),o.classList.remove("visually-hidden"),l.removeEventListener("click",U,{once:"true"}),c.removeEventListener("click",G));if(S>Math.ceil((I-1)/N))return K();H(S)}()}}function G(e){if(q(),T(),!(I<=N||Number.parseInt(e.target.textContent)>C||Number.parseInt(e.target.textContent)===S))return"start"===e.target.dataset.page&&S>1?F():"last"===e.target.dataset.page?K():"first"===e.target.dataset.page?R(p):"second"===e.target.dataset.page&&C>=2?R(g):"third"===e.target.dataset.page&&C>=3?R(h):"more"===e.target.dataset.page?Q():"next"===e.target.dataset.page?J():"end"===e.target.dataset.page?function(){if(2===C)return J();j(),4===N?(h.classList.add("current-page"),console.log(`end but totalapages ${C}`),A(C-2)):(g.classList.add("current-page"),console.log(`totalapages ${C}`),A(C-1));D(C-S),H(S)}():void 0}function R(e){D(Number.parseInt(e.textContent)-S),j(),e.classList.add("current-page"),H(S)}function j(){p.classList.remove("current-page"),g.classList.remove("current-page"),h.classList.remove("current-page")}function F(){j(),A(1),D(1-S),p.classList.add("current-page"),H(1)}function K(){if(!(S<=1))return 2===S?(console.log("page ===2"),F()):(3===N?p.classList.contains("current-page")?(j(),g.classList.add("current-page"),O(-2),console.log("s 3 next")):g.classList.contains("current-page")?(j(),p.classList.add("current-page")):O(-1):function(){p.classList.contains("current-page")&&3!==S?(j(),h.classList.add("current-page"),O(-3)):g.classList.contains("current-page")&&3!==S?(j(),p.classList.add("current-page")):h.classList.contains("current-page")&&3!==S&&(j(),g.classList.add("current-page"));3===S&&(p.classList.contains("current-page")?(j(),g.classList.add("current-page"),O(-2)):g.classList.contains("current-page")?(j(),p.classList.add("current-page")):(j(),g.classList.add("current-page")))}(),D(-1),H(S))}function J(){S>=C||(3===N?p.classList.contains("current-page")?(j(),g.classList.add("current-page")):g.classList.contains("current-page")?(j(),p.classList.add("current-page"),O(2)):O(1):function(){if(p.classList.contains("current-page"))j(),g.classList.add("current-page");else if(g.classList.contains("current-page"))j(),h.classList.add("current-page");else{if(h.classList.contains("current-page"))return Q();O(1)}}(),console.log("next"),D(1),H(S))}function Q(){if(Number.parseInt(p.textContent)+N-1<=C)return console.log("more"),j(),p.classList.add("current-page"),O(4===N?3:2),D(p.textContent-S),H(S)}function V(){console.log(`total pages ${C}`),console.log(`page ${S}`),console.log(`booksInCart ${I}`),C<=1?(c.classList.add("visually-hidden"),c.removeEventListener("click",G)):(c.classList.remove("visually-hidden"),c.addEventListener("click",G)),3===N&&(S>2&&d.classList.remove("visually-hidden"),S<=2&&d.classList.add("visually-hidden"),S>2?u.classList.remove("visually-hidden"):S<=2&&!p.classList.contains("current-page")?(console.log("p <= 2 1!=c"),u.classList.add("visually-hidden")):u.classList.add("visually-hidden"),C-S>2&&v.classList.remove("visually-hidden"),(C-S==1&&g.classList.contains("current-page")||C-S>1)&&L.classList.remove("visually-hidden"),C-S<=1&&p.classList.contains("current-page")?(console.log("-next <=1 &&"),L.classList.add("visually-hidden")):C-S<=1&&(console.log("-next <=1"),L.classList.add("visually-hidden")),C-S>=3&&m.classList.remove("visually-hidden"),C-S<3&&p.classList.contains("current-page")?m.classList.remove("visually-hidden"):C-S<3&&m.classList.add("visually-hidden")),4===N&&(3===S&&p.classList.contains("current-page")?d.classList.remove("visually-hidden"):S>3&&(d.classList.remove("visually-hidden"),u.classList.remove("visually-hidden")),S<=3&&h.classList.contains("current-page")?(d.classList.add("visually-hidden"),u.classList.add("visually-hidden")):S<=3&&g.classList.contains("current-page")&&d.classList.add("visually-hidden"),S<2&&(u.classList.add("visually-hidden"),d.classList.add("visually-hidden")),C===S&&h.classList.contains("current-page")||C-S<=1&&h.classList.contains("current-page")?h.classList.remove("visually-hidden"):C-S<=1&&p.classList.contains("current-page")?h.classList.add("visually-hidden"):C!==S||h.classList.contains("current-page")?C-S>=2&&p.classList.contains("current-page")&&h.classList.remove("visually-hidden"):(console.log("t=p && !3c"),h.classList.add("visually-hidden")),C-S>=3&&v.classList.remove("visually-hidden"),C-S<=2&&v.classList.add("visually-hidden"),C-S<=2&&p.classList.contains("current-page")&&L.classList.add("visually-hidden"),C-S<=1&&h.classList.contains("current-page")?L.classList.remove("visually-hidden"):C-S<=1&&!h.classList.contains("current-page")?(console.log("<1 && 3!c"),L.classList.add("visually-hidden")):C-S<=1?L.classList.add("visually-hidden"):C-S>2&&L.classList.remove("visually-hidden"),C-S>3?m.classList.remove("visually-hidden"):(C-S<3&&p.classList.contains("current-page")||C-S<3)&&m.classList.add("visually-hidden")),S>=2&&p.classList.contains("current-page")&&(console.log("p = 2 1=c"),u.classList.remove("visually-hidden")),C>S&&g.classList.remove("visually-hidden"),C-S<=0&&p.classList.contains("current-page")&&g.classList.add("visually-hidden"),C-S<=1&&v.classList.add("visually-hidden"),C-S<=0&&(console.log("-next"),v.classList.add("visually-hidden"),L.classList.add("visually-hidden"),m.classList.add("visually-hidden")),C-S<=1&&m.classList.add("visually-hidden")}x=localStorage.getItem("user-id"),async function(){try{const e=await(0,i.reedBookID)(x);E(e),$(e),q(),T(),B(),A(S),l.innerHTML="",z(),_(S,e).forEach((e=>{P(e)})),V()}catch(e){console.log(e)}}(),y.addListener(M),M(y),r.addEventListener("click",(function(){r.style.color="var(--main-text-color)",H()}));
//# sourceMappingURL=shopping.de75236c.js.map
