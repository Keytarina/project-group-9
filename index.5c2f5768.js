!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequire7951;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequire7951=a),a("aVBI1"),a("9VC5X"),a("i8Q71");var r,s=a("bpxeT"),i=a("8nrFW"),c=a("2TvXO"),l=a("aVBI1"),d=function(t){return'<h1 class="best-sellers-header">Best Sellers <span class="best-sellers-accent">Books</span></h1>'.concat(e(i)(t).map((function(e){var t=e.list_name,n=e.books;return'<div class="book-list-wrapper"><h2 class="best-sellers-title">'.concat(t,'</h2>\n     <ul class="best-sellers-list">').concat(n.map((function(e){var t=e._id,n=e.author,o=e.book_image,a=e.title;return'<li class="best-sellers-list-item">\n              <div class="best-sellers-thumb"><img class="best-sellers-image" src='.concat(o," alt=").concat(a," data-id-img=").concat(t,'/><div class="book-thumb-overlay"><p class="book-overlay-text">quick view</p></div></div>\n              <div class="book-description-thumb"><h3 class="book-title">').concat(a.length>18?a.slice(0,18)+"...":a,'</h3>\n              <p class="book-description">').concat(n,"</p></div>\n          </li>")})).join(""),'</ul><button class="see-more-btn" type="button">See More</button></div>')})).join(""))},u=function(t){var n,o=e(i)(t).map((function(e){var t=e._id,o=e.author,a=e.book_image,r=e.title,s=e.list_name;return n=s,'<li class="book-category-list-item">\n            <div class="best-sellers-thumb"><img class="best-sellers-image" src='.concat(a," alt=").concat(r," data-id-img=").concat(t,'/><div class="book-thumb-overlay"><p class="book-overlay-text">quick view</p></div></div>\n            <div class="book-description-thumb"><h3 class="book-title">').concat(r.length>18?r.slice(0,18)+"...":r,'</h3>\n            <p class="book-description">').concat(o,"</p></div>\n        </li>")})).join("");return(n=n.split(" ").map((function(e,t,a){if(a.indexOf(e)+1===a.length)return'<h1 class="best-sellers-header">'.concat(n.split(" ").slice(0,t).join(" "),'<span class="best-sellers-accent"> ').concat(e,'<span></h1><ul class="book-category-list">').concat(o,"</ul>")}))).join("")},p=document.querySelector("#container-best"),g=(r=e(s)(e(c).mark((function t(){var n,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.fetchTopBooks)();case 3:n=e.sent,o=d(n),p.insertAdjacentHTML("beforeend",o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])}))),function(){return r.apply(this,arguments)}),h=function(){return p.innerHTML=""};p.innerHTML||g();s=a("bpxeT"),c=a("2TvXO"),l=a("aVBI1");var m=document.querySelector(".categories-item"),f=document.querySelector(".categories-item"),b=document.getElementsByClassName("categories-list"),v=document.querySelector("#container-best");function k(){return(k=e(s)(e(c).mark((function t(n){var o,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("LI"===n.target.nodeName||"All categories"!==n.target.textContent){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,l.fetchBooksByCategory)(n.target.textContent);case 5:o=e.sent,a=u(o),h(),v.insertAdjacentHTML("beforeend",a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}function y(){return(y=e(s)(e(c).mark((function t(n){var o,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("All categories"!==n.target.textContent){e.next=13;break}return e.prev=1,e.next=4,(0,l.fetchTopBooks)();case 4:o=e.sent,a=d(o),h(),v.insertAdjacentHTML("beforeend",a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}f.addEventListener("click",(function(e){b===document.getElementsByClassName("categories-list")&&(b=e.target);return b.classList.remove("active"),(b=e.target).classList.add("active"),b})),(0,l.fetchBooksCategoryList)().then((function(e){var t=e.map((function(e){var t=e.list_name;return'<li class="categories-list" id='.concat(t,">").concat(t,"</li>")})).join("");m.insertAdjacentHTML("beforeend",t)})).catch((function(e){return console.log(e)})),f.addEventListener("click",(function(e){return k.apply(this,arguments)})),f.addEventListener("click",(function(e){return y.apply(this,arguments)})),a("xpKCW");s=a("bpxeT"),c=a("2TvXO"),l=a("aVBI1");var x=document.querySelector(".modal"),S=document.querySelector(".modal-card"),w=document.getElementById("container-best"),L=document.querySelector(".modal-window-text"),T=document.querySelector(".cls-button"),B=document.querySelector("[data-modal-backdrop]"),E=[];function N(e){if("Escape"===e.code)return _(),I()}function O(e){if("BUTTON"===e.currentTarget.nodeName)return _(),I()}function _(){T.removeEventListener("click",O,{once:"true"}),S.removeEventListener("click",A),document.removeEventListener("keydown",N,{once:"true"}),B.removeEventListener("click",C)}function C(e){if(e.target===B)return _(),I()}function I(){x.classList.toggle("is-hidden"),B.classList.toggle("is-hidden"),document.body.classList.toggle("stop-scrolling")}function q(){return(q=e(s)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.fetchBookById)(n);case 3:M(e.sent,n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function M(e,t){var n,o,a,r=e.title,s=e.author,i=e.book_image,c=void 0===i?"./image/shopping/dummy-book-tr.png":i,l=e.description,d=e.buy_links;n=d[0].url,o=d[1].url,a=d[4].url,0===l.trim().length&&(l="Description is not available for that book");var u;return u=function(e){var t=e.id,n=e.title,o=e.author,a=e.book_image,r=e.description,s=e.amazonUrl,i=e.appleUrl,c=e.bookShopUrl;return'\n  <div class="modal-window">\n    <div class="picture">\n      <img class="card-img" src="'.concat(a,'" alt="').concat(r,'" />\n    </div>\n    <div class="info">\n      <h1 class="titles">').concat(n,'</h1>\n      <h2 class="authors">').concat(o,'</h2>\n      <p class="descriptions">').concat(r,'</p>\n      <ul class="icons">\n        <li class="icon-link">\n          <a\n                    class="shopping-card-shop-link"\n                    href="').concat(s,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Amazon link"\n                    ><img\n                      width="62px"\n                      class="shopping-card-link-icon shopping-card-link-amazon"\n                      src="./shop-amazon-62x19px.a7ec3af8.png"\n                      alt="Amazon" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="').concat(i,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Apple Books link"\n                  >\n                    <img\n                      width="32px"\n                      height="32px"\n                      class="shopping-card-link-icon"\n                      src="./shop-read-33x32px.a9f158e0.png"\n                      alt="Apple Books" loading="lazy"\n                    />\n                  </a></li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="').concat(c,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="BookShop link"\n                  >\n                    <img\n                      width="38px"\n                      height="36px"\n                      class="shopping-card-link-icon shopping-card-link-shopbook"\n                      src="./shop-book-shop-38x36px.eb5fbc1e.png"\n                      alt="BookShop" loading="lazy"\n                    />\n                  </a>\n        </li>\n      </ul>\n    </div>\n    <button\n    class="btn-action button pointer"\n    data-modal-submit="add" data-id=').concat(t,'\n    type="button">add to shopping list</button>\n  </div>')}({id:t,title:r,author:s,book_image:c,description:l,amazonUrl:n,appleUrl:o,bookShopUrl:a}),S.innerHTML="",S.insertAdjacentHTML("afterbegin",u)}function j(){if(!JSON.parse(localStorage.getItem("id")))return E=[],localStorage.setItem("id",JSON.stringify(E))}function A(e){if(e.target.classList.contains("btn-action")){var t=e.target.dataset.id;!function(e,t){if(j(),E.includes(e))t.target.dataset.modalSubmit="del"}(t,e),"add"===e.target.dataset.modalSubmit?(!function(e){if(!JSON.parse(localStorage.getItem("id")))return(E=[]).push(e),localStorage.setItem("id",JSON.stringify(E));(E=JSON.parse(localStorage.getItem("id"))).includes(e)?console.log("this book already in a busket"):(E.push(e),localStorage.setItem("id",JSON.stringify(E)))}(t),e.target.textContent="remove from the shopping list",L.textContent='Ð¡ongratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".',L.classList.remove("is-hidden"),e.target.dataset.modalSubmit="del"):(!function(e){if(j(),(E=JSON.parse(localStorage.getItem("id"))).includes(e)){var t=E.indexOf(e);E.splice(t,1),localStorage.setItem("id",JSON.stringify(E))}}(t),e.target.textContent="add to shopping list",L.classList.add("is-hidden"),e.target.dataset.modalSubmit="add")}}j(),w.addEventListener("click",(function(e){if("IMG"===e.target.nodeName){var t=e.target.dataset.idImg;I(),function(e){q.apply(this,arguments)}(t),n=t,j(),(E=JSON.parse(localStorage.getItem("id"))).includes(n)&&(L.textContent="This book is already in your cart",L.classList.remove("is-hidden")),S.addEventListener("click",A),document.addEventListener("keydown",N,{once:"true"}),T.addEventListener("click",O,{once:"true"}),B.addEventListener("click",C)}var n}));s=a("bpxeT"),c=a("2TvXO"),l=a("aVBI1");var U=document.querySelector("#container-best");document.querySelector(".see-more-btn");function z(){return(z=e(s)(e(c).mark((function t(n){var o,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(),e.next=4,(0,l.fetchBooksByCategory)(n);case 4:o=e.sent,a=u(o),U.insertAdjacentHTML("beforeend",a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}U.addEventListener("click",(function(e){if("BUTTON"===e.target.nodeName){console.log(e.target.parentNode.firstChild.textContent);var t=e.target.parentNode.firstChild.textContent;h(),function(e){z.apply(this,arguments)}(t)}}));var H=document.querySelector(".scroll-up");window.addEventListener("scroll",(function(){window.onscroll=function(){window.scrollY>700?H.classList.remove("scroll-up_hide"):window.scrollY<700&&H.classList.add("scroll-up_hide")}})),H.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))}();
//# sourceMappingURL=index.5c2f5768.js.map
