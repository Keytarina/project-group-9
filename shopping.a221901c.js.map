{"mappings":"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","sources":["src/js/shopping.js","src/js/shopping-list.js"],"sourcesContent":["import './serviceApi';\nimport './theme';\nimport './authorization';\nimport './header';\nimport './support';\nimport './shopping-list';\n","import { fetchBookById } from './serviceApi';\nimport { dellBookID, reedBookID } from './authorization.js';\n\nconsole.log(localStorage.page);\n\nconst list = document.querySelector('.shopping-list-list');\nconst dummyMessage = document.querySelector('.shopping-dummy-message');\nconst controller = document.querySelector('.shopping-paginator-list');\nconst refresh = document.querySelector('.shopping-refresh-btn');\n\nconst startBtn = document.querySelector('button[data-page=\"start\"]');\nconst lastBtn = document.querySelector('button[data-page=\"last\"]');\nconst firstBtn = document.querySelector('button[data-page=\"first\"]');\nconst secondBtn = document.querySelector('button[data-page=\"second\"]');\nconst thirdBtn = document.querySelector('.btn-hidden');\nconst moreBtn = document.querySelector('button[data-page=\"more\"]');\nconst nextBtn = document.querySelector('button[data-page=\"next\"]');\nconst endBtn = document.querySelector('button[data-page=\"end\"]');\n\nconst mediaQuery = window.matchMedia('(min-width: 768px)');\n\nconst support = document.querySelector('.support');\n\nconst mediaQuerySupport = window.matchMedia('(max-width: 1439px)');\nsupport.style.position = 'static';\n\nfunction handleDesktopChange(e) {\n  if (e.matches) {\n    support.classList.add('visually-hidden');\n  } else {\n    support.classList.remove('visually-hidden');\n  }\n}\nmediaQuerySupport.addListener(handleDesktopChange);\nhandleDesktopChange(mediaQuerySupport);\n\nlet user = '';\n\n// -----------\n// let booksInCart - кількість книг, у кошику;\n// paginator - кількість книг, що буде відображатись на сторінці.\n// page - сторінка списку книг.\n// totalPages - скільки займатимуть сторінок книги з localStorage.\n\nlet storageOfBooksId = [];\nlet booksInCart = 0;\nlet paginator = 3;\nlet page = 1;\nlet totalPages = 1;\n\nfunction fetchUser() {\n  user = localStorage.getItem('user-id');\n  return user;\n}\nfetchUser();\n// ----------------------------\n\nfunction recordArrayOfBooks(data) {\n  storageOfBooksId = data;\n  console.log(storageOfBooksId);\n  return storageOfBooksId;\n}\nfunction recordBookInCart(data) {\n  booksInCart = data.length;\n  console.log(booksInCart);\n  return booksInCart;\n}\n// --------Функція, що повертає кількість книг, що вміщує сторінка і загальну кількість сторінок,\n//   яку при цьому займуть книги у кошику------\n\nfunction fetchPaginator() {\n  if (mediaQuery.matches) {\n    // console.log('4 on page');\n    return (paginator = 4);\n  } else {\n    // console.log('3 on page');\n    return (paginator = 3);\n  }\n}\n\nfunction refreshTotalPages() {\n  console.log(booksInCart);\n  totalPages = Math.ceil(booksInCart / paginator);\n  return totalPages;\n}\nfunction checkCurrentPage() {\n  if (page <= 0) {\n    page = 1;\n    console.log(page);\n  }\n  if (Number.parseInt(localStorage.getItem('page')) > 0) {\n    page = localStorage.getItem('page');\n    console.log(page);\n  }\n  if (page > totalPages) {\n    page = totalPages;\n  }\n  console.log(page);\n}\n// формування повідомлення про пустий кошик----\nfunction showMessageIfEmpty() {\n  if (booksInCart > 0) {\n    dummyMessage.classList.add('visually-hidden');\n    list.classList.remove('visually-hidden');\n    list.addEventListener('click', deleteBook, { once: 'true' });\n  } else {\n    list.classList.add('visually-hidden');\n    controller.classList.add('visually-hidden');\n    dummyMessage.classList.remove('visually-hidden');\n    list.removeEventListener('click', deleteBook, { once: 'true' });\n    controller.removeEventListener('click', paginate);\n  }\n}\n// ---------\n\n// ------------Рендер останньої сесії---------------------------------\n\nasync function renderLastSession() {\n  try {\n    pageNumeration(page);\n    const data = await reedBookID(user);\n\n    recordArrayOfBooks(data);\n\n    recordBookInCart(data);\n\n    fetchPaginator();\n\n    refreshTotalPages();\n\n    checkCurrentPage();\n\n    list.innerHTML = '';\n    showMessageIfEmpty();\n\n    makeArrayToPaginate(page, data).forEach(id => {\n      renderCardFromData(id);\n    });\n    pagesToShow();\n  } catch (error) {\n    console.log(error);\n  }\n}\nrenderLastSession();\n// ----------------------------------------\n// -----------Функція зміни відображення кількості книжок на сторінці-------------\nfunction handleTabletChange(mediaQuery) {\n  fetchPaginator();\n  if (mediaQuery.matches) {\n    thirdBtn.classList.remove('visually-hidden');\n    // page = Math.ceil(booksOnBusket / 4);\n    // localStorage.page = page;\n  } else if (list.children.length === 4) {\n    list.lastElementChild.classList.remove('visually-hidden');\n  } else {\n    thirdBtn.classList.add('visually-hidden');\n\n    // page = Math.ceil(booksOnBusket / 3);\n    if (list.children.length === 4) {\n      list.lastElementChild.classList.add('visually-hidden');\n    }\n  }\n\n  // localStorage.page = page;\n  pagesToShow();\n  pageNumeration(page);\n}\nmediaQuery.addListener(handleTabletChange);\nhandleTabletChange(mediaQuery);\n\n/////////////Функція, що перезаписує значення поточної сторінки і зберігає його у localStorage\nfunction changePage(adduct) {\n  page += adduct;\n  localStorage.page = page;\n  return page;\n}\n// ------------------------------------\nfunction makeArrayToPaginate(page, data) {\n  localStorage.page = page;\n  const arrayOfBooksToPaginate = data.splice((page - 1) * paginator, paginator);\n  console.log(arrayOfBooksToPaginate);\n  return arrayOfBooksToPaginate;\n}\n\nfunction changeNumeration(weight) {\n  firstBtn.textContent = Number.parseInt(firstBtn.textContent) + weight;\n  secondBtn.textContent = Number.parseInt(secondBtn.textContent) + weight;\n  thirdBtn.textContent = Number.parseInt(thirdBtn.textContent) + weight;\n}\nfunction pageNumeration(page) {\n  firstBtn.textContent = page;\n  secondBtn.textContent = page + 1;\n  thirdBtn.textContent = page + 2;\n}\n// ------функція, що перемальовує сторінку переліку книг у кошику------------------------------------------------\nasync function renderPage(page) {\n  fetchPaginator();\n  refreshTotalPages();\n  list.innerHTML = '';\n  showMessageIfEmpty();\n  const data = await reedBookID(user);\n  await recordArrayOfBooks(data);\n  makeArrayToPaginate(page, data).forEach(id => {\n    renderCardFromData(id);\n  });\n\n  pagesToShow();\n}\n\nasync function renderPage(page) {\n  try {\n    const data = await reedBookID(user);\n    await recordArrayOfBooks(data);\n    recordBookInCart(data);\n    fetchPaginator();\n    refreshTotalPages();\n    checkCurrentPage();\n    list.innerHTML = '';\n    showMessageIfEmpty();\n    makeArrayToPaginate(page, data).forEach(id => {\n      renderCardFromData(id);\n    });\n\n    pagesToShow();\n  } catch (error) {\n    console.log(error);\n  }\n}\n// ------------------------------------------------------\n\n// ------------------------------------------------------\n\n// -----запит данних із серверу----\nasync function renderCardFromData(id) {\n  try {\n    const data = await fetchBookById(id);\n    renderMarkup(data, id);\n  } catch (error) {\n    console.log(error);\n    showMessageIfEmpty();\n    controller.classList.add('visually-hidden');\n    dummyMessage.firstElementChild.textContent =\n      'Server is not available right now. Please, try later';\n    dummyMessage.classList.remove('visually-hidden');\n  }\n}\n// ----------формування шаблону-----------\nfunction renderMarkup(book, id) {\n  let {\n    title = 'Title unknown',\n    author = 'Author unknown',\n    book_image = './image/shopping/dummy-book-tr.png',\n    list_name = 'No category',\n    description,\n    buy_links,\n  } = book;\n  const arrayOfShops = buy_links;\n  let amazonUrl = 'https://www.amazon.com';\n  let appleUrl = 'https://books.apple.com';\n  let bookShopUrl = 'https://bookshop.org';\n  amazonUrl = arrayOfShops[0].url;\n  appleUrl = arrayOfShops[1].url;\n  bookShopUrl = arrayOfShops[4].url;\n  if (description.trim().length === 0) {\n    description = 'Description is not available for that book';\n  }\n\n  let markup = '';\n  markup = `<li class=\"shopping-list-item\"><div class=\"shopping-list-item-card\">\n          <img\n            class=\"shopping-card-img\"\n            src=\"${book_image}\"\n            alt=\"book cover\"\n            width=\"100\"\n            height=\"142\" loading=\"lazy\"\n          />\n          <div class=\"shopping-list-card-info\">\n            <h2 class=\"shopping-card-title\">${title}</h2>\n            <p class=\"shopping-card-category\">${list_name}</p>\n            <p class=\"shopping-card-descr\">${description}</p><p class=\"visually-hidden\">\n              Description is not available for that book\n            </p>\n            <div class=\"shopping-card-bottom-container\">\n              <p class=\"shopping-card-author\">${author}</p>\n              <ul class=\"shopping-card-shop-list\">\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${amazonUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"Amazon link\"\n                    ><img\n                      width=\"32\"\n                      class=\"shopping-card-link-icon shopping-card-link-amazon\"\n                      src=\"./shop-amazon-62x19px.a7ec3af8.png\"\n                      alt=\"Amazon\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${appleUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"Apple Books link\"\n                  >\n                    <img\n                      width=\"16\"\n                      height=\"16\"\n                      class=\"shopping-card-link-icon\"\n                      src=\"./shop-read-33x32px.a9f158e0.png\"\n                      alt=\"Apple Books\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${bookShopUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"BookShop link\"\n                  >\n                    <img\n                      width=\"16\"\n                      height=\"16\"\n                      class=\"shopping-card-link-icon shopping-card-link-shopbook\"\n                      src=\"./shop-book-shop-38x36px.eb5fbc1e.png\"\n                      alt=\"BookShop\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class=\"shopping-btn-dump\" type=\"button\" data-book=\"${id}\">\n                <svg class=\"shopping-btn-dump-icon\" width=\"16\" height=\"16\">\n                  <use href=\"./icons-all.435abbb0.svg#dump\"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>`;\n\n  list.insertAdjacentHTML('beforeend', markup);\n}\n// ------------\n\n// -------видалення книги із кошика---------\n\nfunction deleteBook(event) {\n  if (\n    event.target.nodeName === 'use' ||\n    event.target.nodeName === 'svg' ||\n    event.target.nodeName === 'BUTTON'\n  ) {\n    procedureDeletingBook(event);\n  }\n  return;\n}\n\nrefresh.addEventListener('click', refreshPage);\n\nfunction refreshPage() {\n  refresh.style.color = 'var(--main-text-color)';\n  renderPage(page);\n}\n\nfunction procedureDeletingBook(event) {\n  const idToDelete = event.target.dataset.book;\n  dellBookID(idToDelete, user);\n\n  fetchPaginator();\n  if (booksInCart - 1 === 0) {\n    return showMessageIfEmpty();\n  }\n  if (page > Math.ceil((booksInCart - 1) / paginator)) {\n    return lastBtnAction();\n  }\n  renderPage(page);\n}\n\nfunction paginate(event) {\n  fetchPaginator();\n\n  if (booksInCart <= paginator) {\n    return;\n  }\n\n  if (Number.parseInt(event.target.textContent) > totalPages) {\n    return;\n  }\n\n  if (Number.parseInt(event.target.textContent) === page) {\n    return;\n  }\n  if (event.target.dataset.page === 'start') {\n    if (page > 1) {\n      return startBtnAction();\n    }\n  }\n  if (event.target.dataset.page === 'last') {\n    return lastBtnAction();\n  }\n  if (event.target.dataset.page === 'first') {\n    return actionByNumeredBtns(firstBtn);\n  }\n\n  if (event.target.dataset.page === 'second') {\n    if (totalPages >= 2) {\n      return actionByNumeredBtns(secondBtn);\n    }\n  }\n  if (event.target.dataset.page === 'third') {\n    if (totalPages >= 3) {\n      return actionByNumeredBtns(thirdBtn);\n    }\n  }\n  if (event.target.dataset.page === 'more') {\n    return moreBtnAction(paginator);\n  }\n\n  if (event.target.dataset.page === 'next') {\n    return nextBtnAction();\n  }\n  if (event.target.dataset.page === 'end') {\n    return endBtnAction();\n  }\n}\n\nfunction actionByNumeredBtns($numeredBtn) {\n  changePage(Number.parseInt($numeredBtn.textContent) - page);\n  removingCurrentBtnStyle();\n  $numeredBtn.classList.add('current-page');\n  renderPage(page);\n}\n\nfunction removingCurrentBtnStyle() {\n  firstBtn.classList.remove('current-page');\n  secondBtn.classList.remove('current-page');\n  thirdBtn.classList.remove('current-page');\n}\n\nfunction startBtnAction() {\n  removingCurrentBtnStyle();\n  pageNumeration(1);\n  changePage(-page + 1);\n  firstBtn.classList.add('current-page');\n  renderPage(1);\n  return;\n}\n\nfunction lastBtnAction() {\n  if (page <= 1) {\n    return;\n  }\n  if (page === 2) {\n    return startBtnAction();\n  }\n\n  if (paginator === 3) {\n    lastBtnActionWithThreeBooksPerPage();\n  } else {\n    lastBtnActionWithFourBooksPerPage();\n  }\n  changePage(-1);\n  return renderPage(page);\n}\n\nfunction lastBtnActionWithThreeBooksPerPage() {\n  // if (Number.parseInt(firstBtn.textContent) <= 2) {\n  //   return startBtnAction();\n  // }\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n    changeNumeration(-2);\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n  } else {\n    changeNumeration(-1);\n  }\n  if (page === 3) {\n    if (firstBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      secondBtn.classList.add('current-page');\n      changeNumeration(-2);\n    } else if (secondBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      firstBtn.classList.add('current-page');\n      changeNumeration(-1);\n    }\n  }\n}\n\nfunction lastBtnActionWithFourBooksPerPage() {\n  if (firstBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    thirdBtn.classList.add('current-page');\n    changeNumeration(-3);\n  } else if (secondBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n  } else if (thirdBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  }\n  if (page === 3) {\n    if (firstBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      secondBtn.classList.add('current-page');\n      changeNumeration(-2);\n    } else if (secondBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      firstBtn.classList.add('current-page');\n    } else {\n      removingCurrentBtnStyle();\n      secondBtn.classList.add('current-page');\n    }\n  }\n}\n\nfunction nextBtnAction() {\n  if (page >= totalPages) {\n    return;\n  }\n  if (paginator === 3) {\n    nextBtnActionWithThreeBooksPerPage();\n  } else {\n    nextBtnActionWithFourBooksPerPage();\n  }\n  console.log('next');\n  changePage(1);\n  renderPage(page);\n}\n\nfunction moreBtnAction() {\n  if (Number.parseInt(firstBtn.textContent) + paginator - 1 <= totalPages) {\n    console.log('more');\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n    if (paginator === 4) {\n      changeNumeration(3);\n    } else {\n      changeNumeration(2);\n    }\n    changePage(firstBtn.textContent - page);\n    return renderPage(page);\n  }\n}\n\nfunction nextBtnActionWithThreeBooksPerPage() {\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n    changeNumeration(2);\n  } else {\n    changeNumeration(1);\n  }\n}\n\nfunction nextBtnActionWithFourBooksPerPage() {\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    thirdBtn.classList.add('current-page');\n  } else if (thirdBtn.classList.contains('current-page')) {\n    return moreBtnAction(paginator);\n  } else {\n    changeNumeration(1);\n  }\n}\n\nfunction endBtnAction() {\n  if (totalPages === 2) {\n    return nextBtnAction();\n  }\n  if (page != totalPages) {\n    removingCurrentBtnStyle();\n    if (paginator === 4) {\n      thirdBtn.classList.add('current-page');\n      pageNumeration(totalPages - 2);\n    } else {\n      secondBtn.classList.add('current-page');\n      pageNumeration(totalPages - 1);\n    }\n\n    changePage(totalPages - page);\n    renderPage(page);\n  }\n}\n// --------------------\n\nfunction pagesToShow() {\n  if (totalPages <= 1) {\n    controller.classList.add('visually-hidden');\n    controller.removeEventListener('click', paginate);\n    return;\n  }\n  const difr = totalPages - page;\n  if (page > 1) {\n    controller.classList.remove('visually-hidden');\n    controller.addEventListener('click', paginate);\n  } else if (page > 3) {\n    startBtn.classList.remove('visually-hidden');\n  } else if ((page = 3 && firstBtn.classList.contains('current-page'))) {\n    console.log('p = 3 and 1t = c');\n    startBtn.classList.remove('visually-hidden');\n  }\n\n  if (paginator === 3) {\n    if (page > 2) {\n      startBtn.classList.remove('visually-hidden');\n    }\n    if (page > 2 && firstBtn.classList.contains('current-page')) {\n      lastBtn.classList.remove('visually-hidden');\n    }\n    if (totalPages > 3) {\n      moreBtn.classList.remove('visually-hidden');\n    }\n    if (\n      totalPages - page === 1 &&\n      secondBtn.classList.contains('current-page')\n    ) {\n      nextBtn.classList.remove('visually-hidden');\n    }\n    if (\n      totalPages - page === 1 &&\n      firstBtn.classList.contains('current-page')\n    ) {\n      nextBtn.classList.add('visually-hidden');\n    }\n    if (totalPages > 4) {\n      endBtn.classList.remove('visually-hidden');\n    }\n    if (totalPages - page < 2) {\n      endBtn.classList.add('visually-hidden');\n    }\n  }\n\n  if (paginator === 4) {\n    if (page > 3) {\n      startBtn.classList.remove('visually-hidden');\n      lastBtn.classList.remove('visually-hidden');\n    } else if (page === 3 && firstBtn.classList.contains('current-page')) {\n      console.log('1');\n      startBtn.classList.remove('visually-hidden');\n    } else if (page === 2 && firstBtn.classList.contains('current-page')) {\n      lastBtn.classList.remove('visually-hidden');\n    } else if (page > 1) {\n      firstBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages > page &&\n      secondBtn.classList.contains('current-page')\n    ) {\n      secondBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages === page &&\n      firstBtn.classList.contains('current-page')\n    ) {\n      console.log('10');\n      secondBtn.classList.add('visually-hidden');\n    } else if (\n      totalPages > page &&\n      thirdBtn.classList.contains('current-page')\n    ) {\n      thirdBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages === page &&\n      secondBtn.classList.contains('current-page')\n    ) {\n      thirdBtn.classList.add('visually-hidden');\n    } else if (totalPages > 4) {\n      moreBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages - page === 1 &&\n      thirdBtn.classList.contains('current-page')\n    ) {\n      console.log('20');\n      moreBtn.classList.add('visually-hidden');\n      nextBtn.classList.remove('visually-hidden');\n    } else if (totalPages === page) {\n      nextBtn.classList.add('visually-hidden');\n      endBtn.classList.remove('visually-hidden');\n    } else if (totalPages > 5) {\n      console.log('30');\n      endBtn.classList.remove('visually-hidden');\n    } else if (\n      totalPages - page < 3 &&\n      firstBtn.classList.contains('current-page')\n    ) {\n      endBtn.classList.add('visually-hidden');\n    }\n  }\n}\n"],"names":["parcelRequire","$014TN","console","log","localStorage","page","$a3be1a30f1dc577d$var$list","document","querySelector","$a3be1a30f1dc577d$var$dummyMessage","$a3be1a30f1dc577d$var$controller","$a3be1a30f1dc577d$var$refresh","$a3be1a30f1dc577d$var$startBtn","$a3be1a30f1dc577d$var$lastBtn","$a3be1a30f1dc577d$var$firstBtn","$a3be1a30f1dc577d$var$secondBtn","$a3be1a30f1dc577d$var$thirdBtn","$a3be1a30f1dc577d$var$moreBtn","$a3be1a30f1dc577d$var$nextBtn","$a3be1a30f1dc577d$var$endBtn","$a3be1a30f1dc577d$var$mediaQuery","window","matchMedia","$a3be1a30f1dc577d$var$support","$a3be1a30f1dc577d$var$mediaQuerySupport","$a3be1a30f1dc577d$var$handleDesktopChange","e","matches","classList","add","remove","style","position","addListener","$a3be1a30f1dc577d$var$user","$a3be1a30f1dc577d$var$storageOfBooksId","$a3be1a30f1dc577d$var$booksInCart","$a3be1a30f1dc577d$var$paginator","$a3be1a30f1dc577d$var$page","$a3be1a30f1dc577d$var$totalPages","$a3be1a30f1dc577d$var$recordArrayOfBooks","data","$a3be1a30f1dc577d$var$recordBookInCart","length","$a3be1a30f1dc577d$var$fetchPaginator","$a3be1a30f1dc577d$var$refreshTotalPages","Math","ceil","$a3be1a30f1dc577d$var$checkCurrentPage","Number","parseInt","getItem","$a3be1a30f1dc577d$var$showMessageIfEmpty","addEventListener","$a3be1a30f1dc577d$var$deleteBook","once","removeEventListener","$a3be1a30f1dc577d$var$paginate","$a3be1a30f1dc577d$var$handleTabletChange","mediaQuery1","children","lastElementChild","$a3be1a30f1dc577d$var$pagesToShow","$a3be1a30f1dc577d$var$pageNumeration","$a3be1a30f1dc577d$var$changePage","adduct","$a3be1a30f1dc577d$var$makeArrayToPaginate","page1","arrayOfBooksToPaginate","splice","$a3be1a30f1dc577d$var$changeNumeration","weight","textContent","page2","async","$a3be1a30f1dc577d$var$renderPage","page3","innerHTML","$hiPTG","reedBookID","forEach","id","$a3be1a30f1dc577d$var$renderCardFromData","page4","error","book","title","author","book_image","list_name","description","buy_links","arrayOfShops","amazonUrl","appleUrl","bookShopUrl","url","trim","markup","insertAdjacentHTML","$a3be1a30f1dc577d$var$renderMarkup","fetchBookById","firstElementChild","event","target","nodeName","idToDelete","dataset","dellBookID","$a3be1a30f1dc577d$var$lastBtnAction","$a3be1a30f1dc577d$var$procedureDeletingBook","$a3be1a30f1dc577d$var$startBtnAction","$a3be1a30f1dc577d$var$actionByNumeredBtns","$a3be1a30f1dc577d$var$moreBtnAction","$a3be1a30f1dc577d$var$nextBtnAction","$a3be1a30f1dc577d$var$removingCurrentBtnStyle","$a3be1a30f1dc577d$var$endBtnAction","$numeredBtn","contains","$a3be1a30f1dc577d$var$lastBtnActionWithThreeBooksPerPage","$a3be1a30f1dc577d$var$lastBtnActionWithFourBooksPerPage","$a3be1a30f1dc577d$var$nextBtnActionWithFourBooksPerPage","$a3be1a30f1dc577d$var$renderLastSession","color"],"version":3,"file":"shopping.a221901c.js.map"}