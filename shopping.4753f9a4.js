function e(e,t,s,n){Object.defineProperty(e,t,{get:s,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},n={},a=t.parcelRequire7951;null==a&&((a=function(e){if(e in s)return s[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return s[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequire7951=a),a.register("27Lyk",(function(t,s){var n,a;e(t.exports,"register",(()=>n),(e=>n=e)),e(t.exports,"resolve",(()=>a),(e=>a=e));var i={};n=function(e){for(var t=Object.keys(e),s=0;s<t.length;s++)i[t[s]]=e[t[s]]},a=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("27Lyk").register(JSON.parse('{"9OY6h":"shopping.4753f9a4.js","jI9re":"shop-amazon-62x19px.a7ec3af8.png","iUdC1":"shop-read-33x32px.a9f158e0.png","jdnIm":"shop-book-shop-38x36px.eb5fbc1e.png","itVWs":"shopping.20ac0189.js"}')),a("014TN"),a("iO6Mx"),a("hiPTG"),a("70IEE"),a("b11DO");var i=a("014TN"),l=a("hiPTG");a("6KOho");const r=document.querySelector(".shopping-list-list"),c=document.querySelector(".shopping-dummy-message"),o=document.querySelector(".shopping-paginator-list"),d=document.querySelector(".shopping-refresh-btn"),u=document.querySelector('button[data-page="start"]'),p=document.querySelector('button[data-page="last"]'),g=document.querySelector('button[data-page="first"]'),h=document.querySelector('button[data-page="second"]'),v=document.querySelector(".btn-hidden"),L=document.querySelector('button[data-page="more"]'),m=document.querySelector('button[data-page="next"]'),y=document.querySelector('button[data-page="end"]'),f=window.matchMedia("(min-width: 768px)"),b=document.querySelector(".support"),k=window.matchMedia("(max-width: 1439px)");function w(e){e.matches?b.classList.add("visually-hidden"):b.classList.remove("visually-hidden")}b.style.position="static",k.addListener(w),w(k);let x="",S=[],I=0,E=3,C=1,N=1;function _(e){return S=e,S}function q(e){return I=e.length,I}function $(){return E=f.matches?4:3}function H(){return N=Math.ceil(I/E),N}function R(){return"underfined"===C?(C=1,C):Number.parseInt(localStorage.getItem("page"))>0?(C=Number.parseInt(localStorage.getItem("page")),C):C>N?(C=N,C):(C=1,C)}function T(){I>0?(c.classList.add("visually-hidden"),r.classList.remove("visually-hidden"),r.addEventListener("click",G,{once:"true"})):(r.classList.add("visually-hidden"),o.classList.add("visually-hidden"),c.classList.remove("visually-hidden"),r.removeEventListener("click",G,{once:"true"}),o.removeEventListener("click",J))}function A(e){$(),H(),e.matches?(v.classList.remove("visually-hidden"),4===r.children.length&&r.lastElementChild.classList.remove("visually-hidden")):(v.classList.add("visually-hidden"),4===r.children.length&&r.lastElementChild.classList.add("visually-hidden")),Z()}function O(e){return C+=e,localStorage.page=C,C}function U(e,t){localStorage.page=e;return t.splice((e-1)*E,E)}function B(e){g.textContent=Number.parseInt(g.textContent)+e,h.textContent=Number.parseInt(h.textContent)+e,v.textContent=Number.parseInt(v.textContent)+e}function j(e){g.textContent=Number.parseInt(e),h.textContent=Number.parseInt(e+1),v.textContent=Number.parseInt(e+2)}async function z(e){try{const t=await(0,l.reedBookID)(x);await _(t),q(t),$(),H(),R(),r.innerHTML="",T(),U(e,t).forEach((e=>{M(e)})),Z()}catch(e){console.log(e)}}async function M(e){try{!function(e,t){let{title:s="Title unknown",author:n="Author unknown",book_image:a="./image/shopping/dummy-book-tr.png",list_name:i="No category",description:l,buy_links:c}=e;const o=c;let d="https://www.amazon.com",u="https://books.apple.com",p="https://bookshop.org";d=o[0].url,u=o[1].url,p=o[4].url,0===l.trim().length&&(l="Description is not available for that book");const g=new URL(D),h=new URL(F),v=new URL(P);let L="";L=`<li class="shopping-list-item"><div class="shopping-list-item-card">\n          <img\n            class="shopping-card-img"\n            src="${a}"\n            alt="book cover"\n            width="100"\n            height="142" loading="lazy"\n          />\n          <div class="shopping-list-card-info">\n            <h2 class="shopping-card-title">${s}</h2>\n            <p class="shopping-card-category">${i}</p>\n            <p class="shopping-card-descr">${l}</p><p class="visually-hidden">\n              Description is not available for that book\n            </p>\n            <div class="shopping-card-bottom-container">\n              <p class="shopping-card-author">${n}</p>\n              <ul class="shopping-card-shop-list">\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${d}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Amazon link"\n                    ><img\n                      width="32"\n                      class="shopping-card-link-icon shopping-card-link-amazon"\n                      src=${g}\n                      alt="Amazon" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${u}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="Apple Books link"\n                  >\n                    <img\n                      width="16"\n                      height="16"\n                      class="shopping-card-link-icon"\n                      src=${h}\n                      alt="Apple Books" loading="lazy"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class="shopping-card-shop-link"\n                    href="${p}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    aria-label="BookShop link"\n                  >\n                    <img\n                      width="16"\n                      height="16"\n                      class="shopping-card-link-icon shopping-card-link-shopbook"\n                      src=${v}\n                      alt="BookShop" loading="lazy"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class="shopping-btn-dump" type="button" data-book="${t}">\n                <svg class="shopping-btn-dump-icon"  data-book="${t}" width="16" height="16">\n                  <use  data-book="${t}" href="./icons-all.568e592f.svg#dump"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>`,r.insertAdjacentHTML("beforeend",L)}(await(0,i.fetchBookById)(e),e)}catch(e){console.log(e),T(),o.classList.add("visually-hidden"),c.firstElementChild.textContent="Server is not available right now. Please, try later",c.classList.remove("visually-hidden")}}x=localStorage.getItem("user-id"),async function(){try{const e=await(0,l.reedBookID)(x);_(e),q(e),$(),H(),R(),j(C),r.innerHTML="",T(),U(C,e).forEach((e=>{M(e)})),Z()}catch(e){console.log(e)}}(),f.addListener(A),A(f);var D;D=new URL(a("27Lyk").resolve("jI9re"),import.meta.url).toString();var F;F=new URL(a("27Lyk").resolve("iUdC1"),import.meta.url).toString();var P;function G(e){if("use"===e.target.nodeName||"svg"===e.target.nodeName||"BUTTON"===e.target.nodeName){const t=e.target.dataset.book;(0,l.dellBookID)(t,x),function(){$(),I-1==0&&(r.classList.add("visually-hidden"),o.classList.add("visually-hidden"),c.classList.remove("visually-hidden"),r.removeEventListener("click",G,{once:"true"}),o.removeEventListener("click",J));if(C>Math.ceil((I-1)/E))return Y();z(C)}()}}function J(e){if($(),H(),!(I<=E||Number.parseInt(e.target.textContent)>N||Number.parseInt(e.target.textContent)===C))return"start"===e.target.dataset.page&&C>1?W():"last"===e.target.dataset.page?Y():"first"===e.target.dataset.page?K(g):"second"===e.target.dataset.page&&N>=2?K(h):"third"===e.target.dataset.page&&N>=3?K(v):"more"===e.target.dataset.page?X():"next"===e.target.dataset.page?Q():"end"===e.target.dataset.page?function(){if(2===N)return Q();V(),4===E?(v.classList.add("current-page"),j(N-2)):(h.classList.add("current-page"),j(N-1));O(N-C),z(C)}():void 0}function K(e){O(Number.parseInt(e.textContent)-C),V(),e.classList.add("current-page"),z(C)}function V(){g.classList.remove("current-page"),h.classList.remove("current-page"),v.classList.remove("current-page")}function W(){V(),j(1),O(1-C),g.classList.add("current-page"),z(1)}function Y(){if(!(C<=1))return 2===C?W():(3===E?g.classList.contains("current-page")?(V(),h.classList.add("current-page"),B(-2)):h.classList.contains("current-page")?(V(),g.classList.add("current-page")):B(-1):function(){g.classList.contains("current-page")&&3!==C?(V(),v.classList.add("current-page"),B(-3)):h.classList.contains("current-page")&&3!==C?(V(),g.classList.add("current-page")):v.classList.contains("current-page")&&3!==C&&(V(),h.classList.add("current-page"));3===C&&(g.classList.contains("current-page")?(V(),h.classList.add("current-page"),B(-2)):h.classList.contains("current-page")?(V(),g.classList.add("current-page")):(V(),h.classList.add("current-page")))}(),O(-1),z(C))}function Q(){C>=N||(3===E?g.classList.contains("current-page")?(V(),h.classList.add("current-page")):h.classList.contains("current-page")?(V(),g.classList.add("current-page"),B(2)):B(1):function(){if(g.classList.contains("current-page"))V(),h.classList.add("current-page");else if(h.classList.contains("current-page"))V(),v.classList.add("current-page");else{if(v.classList.contains("current-page"))return X();B(1)}}(),O(1),z(C))}function X(){if(Number.parseInt(g.textContent)+E-1<=N)return V(),g.classList.add("current-page"),B(4===E?3:2),O(g.textContent-C),z(C)}function Z(){N<=1?(o.classList.add("visually-hidden"),o.removeEventListener("click",J)):(o.classList.remove("visually-hidden"),o.addEventListener("click",J)),3===E&&(C>2&&u.classList.remove("visually-hidden"),C<=2&&u.classList.add("visually-hidden"),C>2?p.classList.remove("visually-hidden"):(C<=2&&g.classList.contains("current-page"),p.classList.add("visually-hidden")),N-C>2&&L.classList.remove("visually-hidden"),(N-C==1&&h.classList.contains("current-page")||N-C>1)&&m.classList.remove("visually-hidden"),(N-C<=1&&g.classList.contains("current-page")||N-C<=1)&&m.classList.add("visually-hidden"),N-C>=3&&y.classList.remove("visually-hidden"),N-C<3&&g.classList.contains("current-page")?y.classList.remove("visually-hidden"):N-C<3&&y.classList.add("visually-hidden")),4===E&&(3===C&&g.classList.contains("current-page")?u.classList.remove("visually-hidden"):C>3&&(u.classList.remove("visually-hidden"),p.classList.remove("visually-hidden")),C<=3&&v.classList.contains("current-page")?(u.classList.add("visually-hidden"),p.classList.add("visually-hidden")):C<=3&&h.classList.contains("current-page")&&u.classList.add("visually-hidden"),C<2&&(p.classList.add("visually-hidden"),u.classList.add("visually-hidden")),N===C&&v.classList.contains("current-page")||N-C<=1&&v.classList.contains("current-page")?v.classList.remove("visually-hidden"):N-C<=1&&g.classList.contains("current-page")?v.classList.add("visually-hidden"):N!==C||v.classList.contains("current-page")?N-C>=2&&g.classList.contains("current-page")&&v.classList.remove("visually-hidden"):v.classList.add("visually-hidden"),N-C>=3&&L.classList.remove("visually-hidden"),N-C<=2&&L.classList.add("visually-hidden"),N-C<=2&&g.classList.contains("current-page")&&m.classList.add("visually-hidden"),N-C<=1&&v.classList.contains("current-page")?m.classList.remove("visually-hidden"):N-C<=1&&!v.classList.contains("current-page")||N-C<=1?m.classList.add("visually-hidden"):N-C>2&&m.classList.remove("visually-hidden"),N-C>3?y.classList.remove("visually-hidden"):(N-C<3&&g.classList.contains("current-page")||N-C<3)&&y.classList.add("visually-hidden")),C>=2&&g.classList.contains("current-page")&&p.classList.remove("visually-hidden"),N>C&&h.classList.remove("visually-hidden"),N-C<=0&&g.classList.contains("current-page")&&h.classList.add("visually-hidden"),N-C<=1&&L.classList.add("visually-hidden"),N-C<=0&&(L.classList.add("visually-hidden"),m.classList.add("visually-hidden"),y.classList.add("visually-hidden")),N-C<=1&&y.classList.add("visually-hidden")}P=new URL(a("27Lyk").resolve("jdnIm"),import.meta.url).toString(),d.addEventListener("click",(function(){d.style.color="var(--main-text-color)",z(C)}));
//# sourceMappingURL=shopping.4753f9a4.js.map
