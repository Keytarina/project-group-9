{"mappings":"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","sources":["src/js/shopping.js","src/js/shopping-list.js"],"sourcesContent":["import './serviceApi';\nimport './theme';\nimport './authorization';\nimport './header';\nimport './support';\nimport './shopping-list';\n","import { fetchBookById } from './serviceApi';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n// import { dellBookID } from './authorization.js';\n\nconsole.log(localStorage.page);\n\nconst list = document.querySelector('.shopping-list-list');\nconst dummyMessage = document.querySelector('.shopping-dummy-message');\nconst controller = document.querySelector('.shopping-paginator-list');\nconst refresh = document.querySelector('.shopping-refresh-btn');\n\nconst startBtn = document.querySelector('button[data-page=\"start\"]');\nconst lastBtn = document.querySelector('button[data-page=\"last\"]');\nconst firstBtn = document.querySelector('button[data-page=\"first\"]');\nconst secondBtn = document.querySelector('button[data-page=\"second\"]');\nconst thirdBtn = document.querySelector('.btn-hidden');\nconst moreBtn = document.querySelector('button[data-page=\"more\"]');\nconst nextBtn = document.querySelector('button[data-page=\"next\"]');\nconst endBtn = document.querySelector('button[data-page=\"end\"]');\n\nconst mediaQuery = window.matchMedia('(min-width: 768px)');\n\nconst support = document.querySelector('.support');\n\nconst mediaQuerySupport = window.matchMedia('(max-width: 1439px)');\nsupport.style.position = 'static';\n\nfunction handleDesktopChange(e) {\n  if (e.matches) {\n    support.classList.add('visually-hidden');\n  } else {\n    support.classList.remove('visually-hidden');\n  }\n}\nmediaQuerySupport.addListener(handleDesktopChange);\nhandleDesktopChange(mediaQuerySupport);\n\n// localStorage.clear();\n\nlet storageOfBooksId = [];\n\n// -----------\n// paginator - кількість книг, що буде відображатись на сторінці.\n// page - сторінка списку книг.\n// totalPages - скільки займатимуть сторінок книги з localStorage.\n\nlet paginator = 3;\nlet page = 1;\nlet totalPages = 1;\n\n// -----Функція що збирає з localStorage id-шники для пагінації-----\nfunction fetchArrayOfBookId() {\n  if (!JSON.parse(localStorage.getItem('id'))) {\n    storageOfBooksId = [];\n    return localStorage.setItem('id', JSON.stringify(storageOfBooksId));\n  } else {\n    return (storageOfBooksId = JSON.parse(localStorage.getItem('id')));\n  }\n}\nfetchArrayOfBookId();\n\n// --------Функція, що повертає кількість книг, що вміщує сторінка і загальну кількість сторінок,\n//   яку при цьому займуть книги у кошику------\n\nfunction fetchPaginator() {\n  refreshNumberBooksPerPage();\n  refreshTotalPages();\n}\n\nfunction refreshNumberBooksPerPage() {\n  if (mediaQuery.matches) {\n    // console.log('4 on page');\n    return (paginator = 4);\n  } else {\n    // console.log('3 on page');\n    return (paginator = 3);\n  }\n}\nfunction refreshTotalPages() {\n  return (totalPages = Math.ceil(\n    JSON.parse(localStorage.getItem('id')).length / paginator\n  ));\n}\nfetchPaginator();\n\n// формування повідомлення про пустий кошик----\nfunction showMessageIfEmpty() {\n  if (JSON.parse(localStorage.getItem('id')).length > 0) {\n    dummyMessage.classList.add('visually-hidden');\n    list.classList.remove('visually-hidden');\n    list.addEventListener('click', deleteBook, { once: 'true' });\n  } else {\n    list.classList.add('visually-hidden');\n    controller.classList.add('visually-hidden');\n    dummyMessage.classList.remove('visually-hidden');\n    list.removeEventListener('click', deleteBook, { once: 'true' });\n    controller.removeEventListener('click', paginate);\n  }\n}\n// ---------\n\n// ------------Рендер останньої сесії---------------------------------\n\n  const timerId = setTimeout(() => {\n    checkForUpdate();\n  }, 10000);\n\nfunction renderLastSession() {\n  checkCurrentPage();\n  console.log(page);\n  console.log(localStorage.page);\n  fetchPaginator();\n\n  renderBooksFromBusket(page, paginator);\n  pageNumeration(page);\n  console.log(page);\n  console.log(localStorage.page);\n}\nrenderLastSession();\n// ----------------------------------------\n\nfunction checkCurrentPage() {\n  if (Number.parseInt(localStorage.getItem('page')) > 0) {\n    console.log('more then null');\n    page = JSON.parse(localStorage.getItem('page'));\n    console.log(`now is page ${page}`);\n    if (page > totalPages) {\n      console.log('more then need');\n      page = totalPages;\n    }\n  } else {\n    console.log('page else');\n    page = 1;\n  }\n}\n\n// -----------Функція зміни відображення кількості книжок на сторінці-------------\nfunction handleTabletChange(mediaQuery) {\n  // let booksOnBusket = JSON.parse(localStorage.getItem('id')).length;\n  fetchPaginator();\n  if (mediaQuery.matches) {\n    thirdBtn.classList.remove('visually-hidden');\n    // page = Math.ceil(booksOnBusket / 4);\n    // localStorage.page = page;\n  } else if (list.children.length === 4) {\n    list.lastElementChild.classList.remove('visually-hidden');\n  } else {\n    // thirdBtn.classList.add('visually-hidden');\n\n    // page = Math.ceil(booksOnBusket / 3);\n    if (list.children.length === 4) {\n      list.lastElementChild.classList.add('visually-hidden');\n    }\n  }\n\n  // localStorage.page = page;\n  pagesToShow();\n  pageNumeration(page);\n}\nmediaQuery.addListener(handleTabletChange);\nhandleTabletChange(mediaQuery);\n// ------------------------------------------------------\n\n/////////////Функція, що перезаписує значення поточної сторінки і зберігає його у localStorage\nfunction changePage(adduct) {\n  page += adduct;\n  localStorage.page = page;\n  return page;\n}\n// ------------------------------------\n\nfunction makeArrayToPaginate(page, paginator) {\n  fetchArrayOfBookId();\n  localStorage.page = page;\n  const arrayOfBooksToPaginate = storageOfBooksId.splice(\n    (page - 1) * paginator,\n    paginator\n  );\n  return arrayOfBooksToPaginate;\n}\n\nfunction changeNumeration(weight) {\n  firstBtn.textContent = Number.parseInt(firstBtn.textContent) + weight;\n  secondBtn.textContent = Number.parseInt(secondBtn.textContent) + weight;\n  thirdBtn.textContent = Number.parseInt(thirdBtn.textContent) + weight;\n}\nfunction pageNumeration(page) {\n  firstBtn.textContent = page;\n  secondBtn.textContent = page + 1;\n  thirdBtn.textContent = page + 2;\n}\n\nfunction paginate(event) {\n  fetchPaginator();\n\n  if (fetchArrayOfBookId().length <= paginator) {\n    return;\n  }\n\n  if (Number.parseInt(event.target.textContent) > totalPages) {\n    return;\n  }\n\n  if (Number.parseInt(event.target.textContent) === page) {\n    return;\n  }\n  if (event.target.dataset.page === 'start') {\n    if (page > 1) {\n      return startBtnAction();\n    }\n  }\n  if (event.target.dataset.page === 'last') {\n    return lastBtnAction();\n  }\n  if (event.target.dataset.page === 'first') {\n    return actionByNumeredBtns(firstBtn);\n  }\n\n  if (event.target.dataset.page === 'second') {\n    if (totalPages >= 2) {\n      return actionByNumeredBtns(secondBtn);\n    }\n  }\n  if (event.target.dataset.page === 'third') {\n    if (totalPages >= 3) {\n      return actionByNumeredBtns(thirdBtn);\n    }\n  }\n  if (event.target.dataset.page === 'more') {\n    return moreBtnAction(paginator);\n  }\n\n  if (event.target.dataset.page === 'next') {\n    return nextBtnAction();\n  }\n  if (event.target.dataset.page === 'end') {\n    return endBtnAction();\n  }\n}\n\nfunction actionByNumeredBtns($numeredBtn) {\n  changePage(Number.parseInt($numeredBtn.textContent) - page);\n  removingCurrentBtnStyle();\n  $numeredBtn.classList.add('current-page');\n  renderBooksFromBusket(page, paginator);\n}\n\nfunction removingCurrentBtnStyle() {\n  firstBtn.classList.remove('current-page');\n  secondBtn.classList.remove('current-page');\n  thirdBtn.classList.remove('current-page');\n}\n\nfunction startBtnAction() {\n  removingCurrentBtnStyle();\n  pageNumeration(1);\n  changePage(-page + 1);\n  firstBtn.classList.add('current-page');\n  renderBooksFromBusket(1, paginator);\n  return;\n}\n\nfunction lastBtnAction() {\n  if (page <= 1) {\n    return;\n  }\n  if (page === 2) {\n    return startBtnAction();\n  }\n\n  if (paginator === 3) {\n    lastBtnActionWithThreeBooksPerPage();\n  } else {\n    lastBtnActionWithFourBooksPerPage();\n  }\n  changePage(-1);\n  return renderBooksFromBusket(page, paginator);\n}\n\nfunction lastBtnActionWithThreeBooksPerPage() {\n  // if (Number.parseInt(firstBtn.textContent) <= 2) {\n  //   return startBtnAction();\n  // }\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n    changeNumeration(-2);\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n  } else {\n    changeNumeration(-1);\n  }\n  if (page === 3) {\n    if (firstBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      secondBtn.classList.add('current-page');\n      changeNumeration(-2);\n    } else if (secondBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      firstBtn.classList.add('current-page');\n      changeNumeration(-1);\n    }\n  }\n}\n\nfunction lastBtnActionWithFourBooksPerPage() {\n  if (firstBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    thirdBtn.classList.add('current-page');\n    changeNumeration(-3);\n  } else if (secondBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n  } else if (thirdBtn.classList.contains('current-page') && page !== 3) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  }\n  if (page === 3) {\n    if (firstBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      secondBtn.classList.add('current-page');\n      changeNumeration(-2);\n    } else if (secondBtn.classList.contains('current-page')) {\n      removingCurrentBtnStyle();\n      firstBtn.classList.add('current-page');\n    } else {\n      removingCurrentBtnStyle();\n      secondBtn.classList.add('current-page');\n    }\n  }\n}\n\nfunction nextBtnAction() {\n  if (page >= totalPages) {\n    return;\n  }\n  if (paginator === 3) {\n    nextBtnActionWithThreeBooksPerPage();\n  } else {\n    nextBtnActionWithFourBooksPerPage();\n  }\n  console.log('next');\n  changePage(1);\n  renderBooksFromBusket(page, paginator);\n}\n\nfunction moreBtnAction(paginator) {\n  if (Number.parseInt(firstBtn.textContent) + paginator - 1 <= totalPages) {\n    console.log('more');\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n    if (paginator === 4) {\n      changeNumeration(3);\n    } else {\n      changeNumeration(2);\n    }\n    changePage(firstBtn.textContent - page);\n    return renderBooksFromBusket(page, paginator);\n  }\n}\n\nfunction nextBtnActionWithThreeBooksPerPage() {\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    firstBtn.classList.add('current-page');\n    changeNumeration(2);\n  } else {\n    changeNumeration(1);\n  }\n}\n\nfunction nextBtnActionWithFourBooksPerPage() {\n  if (firstBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    secondBtn.classList.add('current-page');\n  } else if (secondBtn.classList.contains('current-page')) {\n    removingCurrentBtnStyle();\n    thirdBtn.classList.add('current-page');\n  } else if (thirdBtn.classList.contains('current-page')) {\n    return moreBtnAction(paginator);\n  } else {\n    changeNumeration(1);\n  }\n}\n\nfunction endBtnAction() {\n  if (totalPages === 2) {\n    return nextBtnAction();\n  }\n  if (page != totalPages) {\n    removingCurrentBtnStyle();\n    if (paginator === 4) {\n      thirdBtn.classList.add('current-page');\n      pageNumeration(totalPages - 2);\n    } else {\n      secondBtn.classList.add('current-page');\n      pageNumeration(totalPages - 1);\n    }\n\n    changePage(totalPages - page);\n    renderBooksFromBusket(page, paginator);\n  }\n}\n// --------------------\n\nfunction pagesToShow() {\n  if (totalPages <= 1) {\n    controller.classList.add('visually-hidden');\n    controller.removeEventListener('click', paginate);\n    return;\n  }\n  const difr = totalPages - page;\n  if (totalPages > 4) {\n    console.log('more than 4');\n    startBtn.classList.remove('visually-hidden');\n    secondBtn.classList.remove('visually-hidden');\n    lastBtn.classList.remove('visually-hidden');\n    moreBtn.classList.remove('visually-hidden');\n    nextBtn.classList.remove('visually-hidden');\n    endBtn.classList.remove('visually-hidden');\n  }\n  if (paginator === 3) {\n    thirdBtn.classList.add('visually-hidden');\n    if (totalPages === 3) {\n      console.log('its 3, paginator = 3');\n      startBtn.classList.add('visually-hidden');\n      lastBtn.classList.add('visually-hidden');\n      moreBtn.classList.add('visually-hidden');\n      nextBtn.classList.remove('visually-hidden');\n      endBtn.classList.add('visually-hidden');\n    } else if (totalPages === 4) {\n      console.log('its 4, paginator = 3');\n      startBtn.classList.remove('visually-hidden');\n      lastBtn.classList.remove('visually-hidden');\n      moreBtn.classList.remove('visually-hidden');\n      nextBtn.classList.add('visually-hidden');\n      endBtn.classList.remove('visually-hidden');\n    }\n    if (difr < 1 && firstBtn.classList.contains('current-page')) {\n      console.log('less than 1-3-1c ');\n      secondBtn.classList.add('visually-hidden');\n      nextBtn.classList.add('visually-hidden');\n      endBtn.classList.add('visually-hidden');\n      moreBtn.classList.add('visually-hidden');\n    } else if (difr < 1) {\n      console.log('less than 1-3 less1');\n      secondBtn.classList.remove('visually-hidden');\n      nextBtn.classList.add('visually-hidden');\n      endBtn.classList.add('visually-hidden');\n      moreBtn.classList.add('visually-hidden');\n    } else if (difr <= 1) {\n      console.log('less than 1-3 =1');\n      secondBtn.classList.remove('visually-hidden');\n      nextBtn.classList.remove('visually-hidden');\n      endBtn.classList.add('visually-hidden');\n      moreBtn.classList.add('visually-hidden');\n    } else if (difr <= 1 && firstBtn.classList.contains('current-page')) {\n      console.log('less than 1-3-1');\n      secondBtn.classList.remove('visually-hidden');\n      nextBtn.classList.remove('visually-hidden');\n      endBtn.classList.add('visually-hidden');\n      moreBtn.classList.add('visually-hidden');\n    } else if (difr > 1) {\n      console.log('more than 1-difr');\n      secondBtn.classList.remove('visually-hidden');\n    }\n  }\n  controller.classList.remove('visually-hidden');\n  controller.addEventListener('click', paginate);\n\n  if (paginator === 4) {\n    if (totalPages === 3) {\n      console.log('its 3, paginator = 4');\n      startBtn.classList.add('visually-hidden');\n      lastBtn.classList.add('visually-hidden');\n      thirdBtn.classList.remove('visually-hidden');\n      moreBtn.classList.add('visually-hidden');\n      nextBtn.classList.add('visually-hidden');\n      endBtn.classList.add('visually-hidden');\n    } else if (totalPages === 4) {\n      console.log('its 4, paginator = 4');\n      startBtn.classList.remove('visually-hidden');\n      lastBtn.classList.remove('visually-hidden');\n      thirdBtn.classList.remove('visually-hidden');\n      moreBtn.classList.remove('visually-hidden');\n      nextBtn.classList.remove('visually-hidden');\n      endBtn.classList.add('visually-hidden');\n    }\n  }\n  if (totalPages === 2) {\n    startBtn.classList.add('visually-hidden');\n    lastBtn.classList.add('visually-hidden');\n    thirdBtn.classList.add('visually-hidden');\n    moreBtn.classList.add('visually-hidden');\n    nextBtn.classList.add('visually-hidden');\n    endBtn.classList.add('visually-hidden');\n  }\n  if (difr < 1 && firstBtn.classList.contains('current-page')) {\n    console.log('less than 1-3-1c ');\n    secondBtn.classList.add('visually-hidden');\n    thirdBtn.classList.add('visually-hidden');\n    nextBtn.classList.add('visually-hidden');\n    endBtn.classList.add('visually-hidden');\n    moreBtn.classList.add('visually-hidden');\n  } else if (difr < 1 && secondBtn.classList.contains('current-page')) {\n    console.log('less than 1-3 less1');\n    secondBtn.classList.remove('visually-hidden');\n    thirdBtn.classList.add('visually-hidden');\n    nextBtn.classList.add('visually-hidden');\n    endBtn.classList.add('visually-hidden');\n    moreBtn.classList.add('visually-hidden');\n  } else if (difr <= 1) {\n    console.log('less than 1-3 =1');\n    secondBtn.classList.remove('visually-hidden');\n    nextBtn.classList.remove('visually-hidden');\n    endBtn.classList.add('visually-hidden');\n    moreBtn.classList.add('visually-hidden');\n  } else if (difr <= 1 && firstBtn.classList.contains('current-page')) {\n    console.log('less than 1-3-1');\n    secondBtn.classList.remove('visually-hidden');\n    nextBtn.classList.remove('visually-hidden');\n    endBtn.classList.add('visually-hidden');\n    moreBtn.classList.add('visually-hidden');\n  } else if (difr > 1) {\n    console.log('more than 1-difr');\n    secondBtn.classList.remove('visually-hidden');\n  }\n  if (page === 1) {\n    startBtn.classList.add('visually-hidden');\n    lastBtn.classList.add('visually-hidden');\n  }\n}\n\n// ------функція, що перемальовує список книг у кошику---------\nfunction renderBooksFromBusket(page, paginator) {\n  localStorage.page = page;\n\n  list.innerHTML = '';\n  showMessageIfEmpty();\n  fetchPaginator();\n  makeArrayToPaginate(page, paginator).forEach(id => {\n    renderCardFromStorage(id);\n  });\n\n  pagesToShow();\n  storageOfBooksId = JSON.parse(localStorage.getItem('id'));\n}\n\n// -----запит данних із серверу----\nasync function renderCardFromStorage(id) {\n  try {\n    const data = await fetchBookById(id);\n    renderMarkup(data, id);\n  } catch (error) {\n    console.log(error);\n    showMessageIfEmpty();\n    controller.classList.add('visually-hidden');\n    dummyMessage.firstElementChild.textContent =\n      'Server is not available right now. Please, try later';\n    dummyMessage.classList.remove('visually-hidden');\n  }\n}\n// ----------формування шаблону-----------\nfunction renderMarkup(book, id) {\n  let {\n    title = 'Title unknown',\n    author = 'Author unknown',\n    book_image = './image/shopping/dummy-book-tr.png',\n    list_name = 'No category',\n    description,\n    buy_links,\n  } = book;\n  const arrayOfShops = buy_links;\n  let amazonUrl = 'https://www.amazon.com';\n  let appleUrl = 'https://books.apple.com';\n  let bookShopUrl = 'https://bookshop.org';\n  amazonUrl = arrayOfShops[0].url;\n  appleUrl = arrayOfShops[1].url;\n  bookShopUrl = arrayOfShops[4].url;\n  if (description.trim().length === 0) {\n    description = 'Description is not available for that book';\n  }\n\n  let markup = '';\n  markup = `<li class=\"shopping-list-item\"><div class=\"shopping-list-item-card\">\n          <img\n            class=\"shopping-card-img\"\n            src=\"${book_image}\"\n            alt=\"book cover\"\n            width=\"100\"\n            height=\"142\" loading=\"lazy\"\n          />\n          <div class=\"shopping-list-card-info\">\n            <h2 class=\"shopping-card-title\">${title}</h2>\n            <p class=\"shopping-card-category\">${list_name}</p>\n            <p class=\"shopping-card-descr\">${description}</p><p class=\"visually-hidden\">\n              Description is not available for that book\n            </p>\n            <div class=\"shopping-card-bottom-container\">\n              <p class=\"shopping-card-author\">${author}</p>\n              <ul class=\"shopping-card-shop-list\">\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${amazonUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"Amazon link\"\n                    ><img\n                      width=\"32\"\n                      class=\"shopping-card-link-icon shopping-card-link-amazon\"\n                      src=\"./shop-amazon-62x19px.a7ec3af8.png\"\n                      alt=\"Amazon\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${appleUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"Apple Books link\"\n                  >\n                    <img\n                      width=\"16\"\n                      height=\"16\"\n                      class=\"shopping-card-link-icon\"\n                      src=\"./shop-read-33x32px.a9f158e0.png\"\n                      alt=\"Apple Books\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n                <li>\n                  <a\n                    class=\"shopping-card-shop-link\"\n                    href=\"${bookShopUrl}\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    aria-label=\"BookShop link\"\n                  >\n                    <img\n                      width=\"16\"\n                      height=\"16\"\n                      class=\"shopping-card-link-icon shopping-card-link-shopbook\"\n                      src=\"./shop-book-shop-38x36px.eb5fbc1e.png\"\n                      alt=\"BookShop\" loading=\"lazy\"\n                    />\n                  </a>\n                </li>\n              </ul>\n              <button class=\"shopping-btn-dump\" type=\"button\" data-book=\"${id}\">\n                <svg class=\"shopping-btn-dump-icon\" width=\"16\" height=\"16\">\n                  <use href=\"./icons-all.568e592f.svg#dump\"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>`;\n\n  list.insertAdjacentHTML('beforeend', markup);\n}\n// ------------\n\n// -------видалення книги із кошика---------\n\nfunction deleteBook(event) {\n  if (\n    event.target.nodeName === 'use' ||\n    event.target.nodeName === 'svg' ||\n    event.target.nodeName === 'BUTTON'\n  ) {\n    procedureDeletingBook(event);\n  }\n  return;\n}\n\nrefresh.addEventListener('click', refreshPage);\n\nfunction refreshPage() {\n  refresh.style.color = 'var(--main-text-color)';\n  checkCurrentPage();\n  renderBooksFromBusket(page, paginator);\n}\n\nfunction procedureDeletingBook(event) {\n  const idToDelete = event.target.dataset.book;\n  const index = storageOfBooksId.indexOf(idToDelete);\n  fetchArrayOfBookId();\n  storageOfBooksId.splice(index, 1);\n  localStorage.setItem('id', JSON.stringify(storageOfBooksId));\n  // dellBookID(idToDelete);\n  fetchPaginator();\n  if (storageOfBooksId.length === 0) {\n    return showMessageIfEmpty();\n  }\n  if (page > totalPages) {\n    return lastBtnAction();\n  }\n  renderBooksFromBusket(page, paginator);\n}\n\nfunction checkForUpdate() {\n  if (storageOfBooksId.length < JSON.parse(localStorage.getItem('id')).length) {\n    refresh.style.color = 'var(--background-color-main)';\n    Notify.success(\n      `You have more new books in the busket. Click Refresh button to check`\n    );\n  }\n}\n"],"names":["parcelRequire","$014TN","console","log","localStorage","page","$a3be1a30f1dc577d$var$list","document","querySelector","$a3be1a30f1dc577d$var$dummyMessage","$a3be1a30f1dc577d$var$controller","$a3be1a30f1dc577d$var$refresh","$a3be1a30f1dc577d$var$startBtn","$a3be1a30f1dc577d$var$lastBtn","$a3be1a30f1dc577d$var$firstBtn","$a3be1a30f1dc577d$var$secondBtn","$a3be1a30f1dc577d$var$thirdBtn","$a3be1a30f1dc577d$var$moreBtn","$a3be1a30f1dc577d$var$nextBtn","$a3be1a30f1dc577d$var$endBtn","$a3be1a30f1dc577d$var$mediaQuery","window","matchMedia","$a3be1a30f1dc577d$var$support","$a3be1a30f1dc577d$var$mediaQuerySupport","$a3be1a30f1dc577d$var$handleDesktopChange","e","matches","classList","add","remove","style","position","addListener","$a3be1a30f1dc577d$var$storageOfBooksId","$a3be1a30f1dc577d$var$paginator","$a3be1a30f1dc577d$var$page","$a3be1a30f1dc577d$var$totalPages","$a3be1a30f1dc577d$var$fetchArrayOfBookId","JSON","parse","getItem","setItem","stringify","$a3be1a30f1dc577d$var$fetchPaginator","Math","ceil","length","$a3be1a30f1dc577d$var$showMessageIfEmpty","addEventListener","$a3be1a30f1dc577d$var$deleteBook","once","removeEventListener","$a3be1a30f1dc577d$var$paginate","setTimeout","color","$9EgcF","Notify","success","$a3be1a30f1dc577d$var$checkCurrentPage","Number","parseInt","$a3be1a30f1dc577d$var$handleTabletChange","mediaQuery1","children","lastElementChild","$a3be1a30f1dc577d$var$pagesToShow","$a3be1a30f1dc577d$var$pageNumeration","$a3be1a30f1dc577d$var$changePage","adduct","$a3be1a30f1dc577d$var$changeNumeration","weight","textContent","page2","event","target","dataset","$a3be1a30f1dc577d$var$startBtnAction","$a3be1a30f1dc577d$var$lastBtnAction","$a3be1a30f1dc577d$var$actionByNumeredBtns","$a3be1a30f1dc577d$var$moreBtnAction","$a3be1a30f1dc577d$var$nextBtnAction","$a3be1a30f1dc577d$var$removingCurrentBtnStyle","$a3be1a30f1dc577d$var$renderBooksFromBusket","$a3be1a30f1dc577d$var$endBtnAction","$numeredBtn","contains","$a3be1a30f1dc577d$var$lastBtnActionWithThreeBooksPerPage","$a3be1a30f1dc577d$var$lastBtnActionWithFourBooksPerPage","$a3be1a30f1dc577d$var$nextBtnActionWithFourBooksPerPage","paginator2","difr","page3","paginator3","page1","paginator1","innerHTML","splice","forEach","id","async","book","title","author","book_image","list_name","description","buy_links","arrayOfShops","amazonUrl","appleUrl","bookShopUrl","url","trim","markup","insertAdjacentHTML","$a3be1a30f1dc577d$var$renderMarkup","fetchBookById","error","firstElementChild","$a3be1a30f1dc577d$var$renderCardFromStorage","nodeName","idToDelete","index","indexOf","$a3be1a30f1dc577d$var$procedureDeletingBook"],"version":3,"file":"shopping.4a817224.js.map"}